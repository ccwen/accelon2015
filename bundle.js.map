{
  "version": 3,
  "sources": [
    "../Users/cheahshen/AppData/Roaming/npm/node_modules/ksana-cli/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "accelon2015/index.js",
    "accelon2015/src/actions/databases.js",
    "accelon2015/src/actions/kwic.js",
    "accelon2015/src/actions/texts.js",
    "accelon2015/src/actions/toc.js",
    "accelon2015/src/auxpanel.js",
    "accelon2015/src/leftpanel.js",
    "accelon2015/src/main.jsx",
    "accelon2015/src/rightpanel.js",
    "accelon2015/src/stores/databases.js",
    "accelon2015/src/stores/kwic.js",
    "accelon2015/src/stores/texts.js",
    "accelon2015/src/stores/toc.js",
    "accelon2015/src/tabs/dbsearchtab.js",
    "accelon2015/src/tabs/kwictab.js",
    "accelon2015/src/tabs/textfooter.js",
    "accelon2015/src/tabs/texttab.js",
    "accelon2015/src/tabs/texttoolbar.js",
    "accelon2015/src/tabs/toctab.js",
    "accelon2015/src/textpanel.js",
    "accelon2015/src/views/dblist.js",
    "accelon2015/src/views/dblistitem.js",
    "accelon2015/src/views/dbsearchinput.js",
    "accelon2015/src/views/hoverlink.js",
    "accelon2015/src/views/kwic.js",
    "accelon2015/src/views/textcontent.js",
    "accelon2015/src/views/toccontent.js",
    "accelon2015/src/views/welcome.js",
    "node_modules/ksana2015-treetoc/addnode.js",
    "node_modules/ksana2015-treetoc/controls.js",
    "node_modules/ksana2015-treetoc/index.js",
    "node_modules/ksana2015-treetoc/manipulate.js",
    "node_modules/ksana2015-treetoc/treenode.js",
    "node_modules/ksana2015-treetoc/treenodehits.js",
    "node_modules/ksana2015-webruntime/downloader.js",
    "node_modules/ksana2015-webruntime/html5fs.js",
    "node_modules/ksana2015-webruntime/ksanagap.js",
    "node_modules/ksana2015-webruntime/livereload.js",
    "node_modules/ksana2015-webruntime/mkdirp.js",
    "node_modules/react-panels/index.js",
    "node_modules/reflux/index.js",
    "node_modules/reflux/node_modules/eventemitter3/index.js",
    "node_modules/reflux/node_modules/native-promise-only/npo.js",
    "node_modules/reflux/src/ActionMethods.js",
    "node_modules/reflux/src/Keep.js",
    "node_modules/reflux/src/ListenerMethods.js",
    "node_modules/reflux/src/ListenerMixin.js",
    "node_modules/reflux/src/PublisherMethods.js",
    "node_modules/reflux/src/StoreMethods.js",
    "node_modules/reflux/src/bindMethods.js",
    "node_modules/reflux/src/connect.js",
    "node_modules/reflux/src/connectFilter.js",
    "node_modules/reflux/src/createAction.js",
    "node_modules/reflux/src/createStore.js",
    "node_modules/reflux/src/index.js",
    "node_modules/reflux/src/joins.js",
    "node_modules/reflux/src/listenTo.js",
    "node_modules/reflux/src/listenToMany.js",
    "node_modules/reflux/src/mixer.js",
    "node_modules/reflux/src/utils.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;;ACAA;AACA;AACA;AACA;;ACHA;;ACAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1pEA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrOA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "var React=require(\"react\");\r\nrequire(\"ksana2015-webruntime/livereload\")();\r\nrequire(\"ksana2015-webruntime/ksanagap\").boot(\"accelon2015\",function(){\r\n\tvar Main=React.createElement(require(\"./src/main.jsx\"));\r\n\tksana.mainComponent=React.render(Main,document.getElementById(\"main\"));\t\r\n});\r\n",
    "module.exports=require(\"reflux\").createActions([\"list\",\"search\"]);",
    "/** \r\nAction of Keywords in context\r\n*/\r\nmodule.exports=require(\"reflux\").createActions([\"open\",\"remove\"]);",
    "module.exports=require(\"reflux\").createActions([\"add\",\"remove\",\"closeAdd\"]);",
    "module.exports=require(\"reflux\").createActions([\"open\",\"search\"]);",
    "var React=require(\"react/addons\");\r\nvar ReactPanels=require(\"react-panels\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\n\r\nvar Panel = ReactPanels.Panel;\r\nvar Tab = ReactPanels.Tab;\r\nvar Button = ReactPanels.Button;\r\nvar Content = ReactPanels.Content;\r\nvar defaultTabs=[];\r\n\r\n//var store_dictionaries=require(\"./stores/kwic\");\r\nvar KWICTab=require(\"./tabs/kwictab\");\r\nvar action=require(\"./actions/kwic\");\r\nvar AuxPanel=React.createClass({displayName: \"AuxPanel\",\r\n  panelbuttons:function(){\r\n    return React.createElement(Button, {title: \"Remove active tab\", onButtonClick: this.closeTab}, \r\n            React.createElement(\"i\", {className: \"fa fa-times\"})\r\n          )\r\n  }\r\n  ,propTypes:{\r\n    kwic: PT.array.isRequired\r\n  }\r\n  ,closeTab:function(e){\r\n    var selectedIndex = this.refs.panel.getSelectedIndex();\r\n    var tabkey=this.props.kwic[selectedIndex].key;\r\n    action.remove(tabkey);\r\n  }\r\n  ,action:function(type,p1,p2) {\r\n\r\n  }\r\n  ,renderKWIC:function(item,idx) {\r\n    if (React.isValidElement(item)) {\r\n      return item;\r\n    } else {\r\n      var component=item.Component||KWICTab;\r\n      var title=item.q+\" in \"+item.db;\r\n      return E(component,{key:idx,title:title, excerpts:item.excerpts,db:item.db,q:item.q});\r\n    }\r\n  }\r\n\t,render:function() {\r\n \t\treturn React.createElement(Panel, {ref: \"panel\", theme: \"flexbox\", buttons: [this.panelbuttons()]}, \r\n      this.props.kwic.map(this.renderKWIC)\r\n    )\r\n\t}\r\n});\r\nmodule.exports=AuxPanel;",
    "var React=require(\"react/addons\");\r\nvar ReactPanels=require(\"react-panels\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\n\r\nvar Panel = ReactPanels.Panel;\r\nvar Tab = ReactPanels.Tab;\r\nvar Button = ReactPanels.Button;\r\nvar Content = ReactPanels.Content;\r\n\r\nvar TocTab=require(\"./tabs/toctab\");\r\nvar DBSearchTab=require(\"./tabs/dbsearchtab\");\r\n\r\nvar LeftPanel=React.createClass({displayName: \"LeftPanel\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\taction: PT.func.isRequired\r\n\t}\r\n  ,action:function(type,p1,p2) {\r\n  \tif (type===\"opentoc\"){\r\n  \t\tthis.refs.panel.setSelectedIndex(1);\r\n  \t\treturn;\r\n  \t}\r\n  \tthis.props.action.apply(this,arguments);\r\n  }\r\n\t,render:function() {\r\n \t\treturn React.createElement(Panel, {ref: \"panel\", theme: \"flexbox\"}, \r\n \t\t\tReact.createElement(DBSearchTab, {action: this.action, title: \"DB\"}), \r\n      React.createElement(TocTab, {action: this.action, title: \"Toc\"})\r\n    )\r\n\t}\r\n});\r\nmodule.exports=LeftPanel;",
    "var React=require(\"react\");\r\nvar LeftPanel=require(\"./leftpanel\");\r\nvar RightPanel=require(\"./rightpanel\");\r\nvar E=React.createElement;\r\n//var ImagePanel=require(\"./imagepanel\");\r\nvar styles={\r\n  container:{\r\n   width:\"100%\",height:\"100%\",background:\"#333333\",\r\n   display:\"flex\",\r\n   overflow:\"hidden\"  \r\n  },\r\n  leftpanel:{\r\n    flex:1\r\n  },\r\n  rightpanel:{\r\n    flex:3\r\n  },\r\n  showPanelButton:{\r\n    position:\"absolute\",\r\n    left:\"0px\",\r\n    top:\"0px\",\r\n    fontSize:\"150%\",\r\n    zIndex:99999,\r\n  }\r\n}\r\n\r\nvar maincomponent = React.createClass({displayName: \"maincomponent\",\r\n  getInitialState:function() {\r\n    return {hideLeftPanel:false,hideBottomPanel:false};\r\n  }\r\n  ,action:function(act,p1,p2) {\r\n    if(act===\"hideLeftPanel\") {\r\n      this.setState({hideLeftPanel:true});\r\n    } else if (act===\"showLeftPanel\") {\r\n      this.setState({hideLeftPanel:false});\r\n    } else if (act===\"hideBottomPanel\") {\r\n      this.setState({hideBottomPanel:true});\r\n    } else if (act===\"showBottomPanel\") {\r\n      this.setState({hideBottomPanel:false});\r\n    }\r\n  }\r\n  ,renderLeft:function() {\r\n    if (!this.state.hideLeftPanel) {\r\n      return E(\"div\",{style:styles.leftpanel},E(LeftPanel,{action:this.action}));\r\n    } \r\n  }\r\n  ,render: function() {\r\n    return E(\"div\",{style:styles.container},\r\n      this.renderLeft(),\r\n      E(\"div\",{style:styles.rightpanel}, E(RightPanel,{action:this.action,\r\n        bottomPanelShown:!this.state.hideBottomPanel,\r\n        leftPanelShown:!this.state.hideLeftPanel})\r\n      )\r\n    );\r\n  }\r\n});\r\nmodule.exports=maincomponent;\r\n//      E(ImagePanel),\r\n",
    "var React=require(\"react\");\r\nvar Reflux=require(\"reflux\");\r\nvar TextPanel=require(\"./textpanel\");\r\nvar AuxPanel=require(\"./auxpanel\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\n\r\nvar styles={\r\n  container:{\r\n   width:\"100%\",height:\"100%\"\r\n   ,background:\"#333333\"\r\n   ,display:\"flex\"\r\n   ,flexDirection: \"column\"\r\n   ,overflow:\"hidden\" \r\n  },\r\n  textpanel:{\r\n    flex:3\r\n  },\r\n  auxpanel:{\r\n    flex:1\r\n    ,position:\"relative\"\r\n  }\r\n};\r\nvar store_kwic=require(\"./stores/kwic\");\r\n\r\nvar RightPanel=React.createClass({displayName: \"RightPanel\",\r\n\tmixins:[Reflux.listenTo(store_kwic,\"onKWICData\")]\r\n  ,getInitialState:function() {\r\n    return {kwic:[]};\r\n  }\r\n  ,onKWICData:function(data) {\r\n    this.setState({kwic:data});\r\n  }\r\n\t,renderAuxPanel:function() {\r\n\t\tif (this.props.bottomPanelShown) {\r\n\t\t\treturn E(\"div\",{style:styles.auxpanel}, E(AuxPanel,{kwic:this.state.kwic}));\r\n\t\t}\r\n\t}\r\n  ,render: function() {\r\n    return E(\"div\",{style:styles.container},\r\n       E(\"div\",{style:styles.textpanel}, \r\n       \t\tE(TextPanel,{action:this.props.action,\r\n       \t\t\tbottomPanelShown:this.props.bottomPanelShown,leftPanelShown:this.props.leftPanelShown}))\r\n       ,this.renderAuxPanel()\r\n    );\r\n  }\r\n});\r\nmodule.exports=RightPanel;\r\n",
    "var Reflux=require(\"reflux\");\r\nvar actions=require(\"../actions/databases\");\r\nvar ksa=require(\"ksana-simple-api\");\r\n\r\nvar DBListStore=Reflux.createStore({\r\n\tdatabases:[]\r\n\t,listenables:actions\r\n\t,init:function() {\r\n\t\tksa.listkdb(function(databases){\r\n\t\t\t\tthis.databases=databases;\r\n\t\t}.bind(this));\r\n\t}\r\n\t,triggerImmutable:function() {\r\n\t\tvar searchable=[];\r\n\t\tfor (var i=0;i<this.searchable.length;i++) {\r\n\t\t\tsearchable.push(this.searchable[i]);\r\n\t\t}\r\n\t\tthis.trigger(searchable);\r\n\t}\r\n\t,onList:function(appname) {\r\n\t\tappname=appname||\"\";\r\n\t\tif (appname) this.searchable=this.databases.filter(function(item){\r\n\t\t\treturn item.folder===appname|| item.folder===\"accelon2015_kdb\"});\r\n\t\telse this.searchable=this.databases;\r\n\t\tthis.triggerImmutable();\r\n\t}\r\n\t,clearResult:function() {\r\n\t\tthis.searchable=this.searchable.map(function(db){\r\n\t\t\tdelete db.hits;\r\n\t\t\treturn db;\r\n\t\t});\r\n\t\tthis.triggerImmutable();\r\n\t}\r\n\t,onSearch:function(tofind){\r\n\t\tvar that=this;\r\n\t\tif (!tofind) {\r\n\t\t\tthis.clearResult();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tksa.fillHits(this.searchable,tofind, function(res){\r\n\t\t\tthis.searchable=JSON.parse(JSON.stringify(res));\r\n\t\t\tthis.triggerImmutable();\r\n\t\t}.bind(this));\r\n\r\n\t}\r\n})\r\n\r\nmodule.exports=DBListStore;",
    "/** \r\n\tStore of Key Words In Context (KWIC)\r\n*/\r\n\r\nvar Reflux=require(\"reflux\");\r\nvar actions=require(\"../actions/kwic\");\r\nvar ksa=require(\"ksana-simple-api\");\r\n\r\nvar KWICStore=Reflux.createStore({\r\n\tlistenables:actions\r\n\t,kwic:[]\r\n\t,find:function(field,val) {\r\n\t\tfor (var i=0;i<this.kwic.length;i++) {\r\n\t\t\tif (this.kwic[i][field]===val) return i;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\t,triggerImmutable:function() {\r\n\t\t\tvar kwic=[];\r\n\t\t\tfor (var i=0;i<this.kwic.length;i++) {\r\n\t\t\t\tkwic.push(this.kwic[i]);\r\n\t\t\t}\r\n\t\t\tthis.trigger(kwic);\r\n\t}\r\n\t,add_replace:function(trait) {\r\n\t\tvar i=this.find(\"dbname\",trait.dbname);\r\n\t\tif (i>-1) this.kwic.splice(i,1);\r\n\t\tthis.kwic.unshift(trait);\r\n\t}\r\n\t,onOpen:function(dbid,tofind,opts) {\r\n\t\tksa.excerpt({db:dbid,q:tofind},function(err,data){\r\n\t\t\tif (!err) {\r\n\t\t\t\tif (!data.key) data.key='S'+Math.round(Math.random()*10);\r\n\t\t\t\tthis.add_replace({db:dbid,q:tofind,excerpts:data});\r\n\t\t\t\tthis.triggerImmutable();\r\n\t\t\t};\r\n\t\t}.bind(this));\r\n\t}\r\n\t,onRemove:function(key) {\r\n\t\tvar i=this.find(\"key\",key);\r\n\t\tif (i===-1)return;\r\n\t\tthis.kwic.splice(i,1);\r\n\t\tthis.triggerImmutable();\r\n\t}\r\n\t,onSearch:function() {\r\n\t}\r\n})\r\nmodule.exports=KWICStore;",
    "var Reflux=require(\"reflux\");\r\nvar actions=require(\"../actions/texts\");\r\nvar MAXTAB=10;\r\n\r\nvar Texts=Reflux.createStore({\r\n\tlistenables:actions\r\n\t,texts:[]\r\n\t,find:function(key) {\r\n\t\tfor (var i=0;i<this.texts.length;i++) {\r\n\t\t\tif (this.texts[i].key===key) return i;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\t,add_replace:function(trait) {\r\n\t\tvar i=this.find(trait.key);\r\n\t\tif (i>-1) this.texts.splice(i,1);\r\n\t\tif (this.texts.length>=MAXTAB) this.texts.pop();\r\n\t \tthis.texts.unshift(trait);\r\n\t}\r\n\t,triggerImmutable:function(key) {\r\n\t\tvar texts=[];\r\n\t\tfor (var i=0;i<this.texts.length;i++) {\r\n\t\t\ttexts.push(this.texts[i]);\r\n\t\t}\r\n\t\tthis.trigger(texts,key);\r\n\t}\r\n\t,onCloseAdd:function(oldkey,trait) {\r\n\t\tvar i=this.find(oldkey);\r\n\t\tif (i==-1)\treturn ;\r\n\t\tthis.texts[i]=trait;\r\n\t\tthis.triggerImmutable(trait.key);\r\n\t}\r\n\t,onAdd:function(trait) {\r\n\t\tthis.add_replace(trait);\r\n\t\tthis.triggerImmutable(trait.key);\r\n\t}\r\n\t,onRemove:function(key) {\r\n\t\tvar i=this.find(key);\r\n\t\tif (i>-1) this.texts.splice(i,1);\r\n\t\tthis.triggerImmutable(key);\r\n\t}\r\n})\r\nmodule.exports=Texts;",
    "/** \r\nStore of Keywords in context\r\n*/\r\n\r\nvar Reflux=require(\"reflux\");\r\nvar actions=require(\"../actions/toc\");\r\nvar ksa=require(\"ksana-simple-api\");\r\nvar TOCStore=Reflux.createStore({\r\n\tlistenables:actions\r\n\t,find:function(key) {\r\n\t}\r\n\t,onOpen:function(dbname,q) {\r\n\t\tksa.toc({db:dbname,q:q},function(err,res){\r\n\t\t\tthis.trigger(res.toc,dbname,res.tocname,q,res.hits);\r\n\t\t}.bind(this));\r\n\t}\r\n\t,onSearch:function(key) {\r\n\t}\r\n})\r\nmodule.exports=TOCStore;",
    "var React=require(\"react/addons\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\n\r\nvar ReactPanels=require(\"react-panels\");\r\nvar Tab = ReactPanels.Tab;\r\nvar TabWrapperMixin = ReactPanels.Mixins.TabWrapper;\r\nvar Toolbar = ReactPanels.Toolbar;\r\nvar Content = ReactPanels.Content;\r\nvar Footer = ReactPanels.Footer;\r\nvar ToggleButton = ReactPanels.ToggleButton;\r\n\r\nvar store=require(\"../stores/databases\");\r\nvar action=require(\"../actions/databases\");\r\n\r\nvar DBList=require(\"../views/dblist\");\r\nvar DBSearchInput=require(\"../views/dbsearchinput\");\r\n\r\nvar DBListTab=React.createClass({displayName: \"DBListTab\",\r\n\tmixins: [Reflux.listenTo(store,\"onData\"),TabWrapperMixin,PureRenderMixin]\r\n\t,getInitialState:function() {\r\n\t\treturn {databases:[],tofind:\"\"};\r\n\t}\r\n\t,propTypes:{\r\n\t\taction:PT.func.isRequired\r\n\t}\r\n\t,componentDidMount:function() {\r\n\t\tsetTimeout(function(){\r\n\t\t\taction.list(ksana.js.kdbfolder);\r\n\t\t}.bind(this),500);\r\n\t}\r\n\t,onData:function(data) {\r\n\t\tthis.setState({databases:data});\r\n\t}\t\r\n\t,onTofindChange:function(tofind) {\r\n\t\tthis.setState({tofind:tofind});\r\n\t}\r\n\t,render:function() {\r\n\t\treturn React.createElement(Tab, {title: \"One\"}, \r\n        React.createElement(Content, null, \r\n        \tReact.createElement(DBSearchInput, {onTofindChange: this.onTofindChange}), \r\n        \tReact.createElement(DBList, {action: this.props.action, databases: this.state.databases, tofind: this.state.tofind})\r\n        )\r\n      )\r\n\t}\r\n});\r\n\r\nmodule.exports=DBListTab;",
    "var React=require(\"react/addons\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\n\r\nvar ReactPanels=require(\"react-panels\");\r\nvar Tab = ReactPanels.Tab;\r\nvar TabWrapperMixin = ReactPanels.Mixins.TabWrapper;\r\nvar Toolbar = ReactPanels.Toolbar;\r\nvar Content = ReactPanels.Content;\r\nvar Footer = ReactPanels.Footer;\r\nvar ToggleButton = ReactPanels.ToggleButton;\r\n\r\nvar KWIC=require(\"../views/kwic\");\r\n\r\nvar KWICTab = React.createClass({\r\n  displayName: 'KWICTab'\r\n  ,getInitialState:function() {\r\n  \treturn {}\r\n  }\r\n  ,mixins: [TabWrapperMixin,PureRenderMixin]\r\n  ,action:function(){\r\n\r\n  }\r\n  ,renderContent:function() {\r\n  \treturn React.createElement(KWIC, {excerpts: this.props.excerpts, db: this.props.db, q: this.props.q})\r\n  }\r\n  ,render:function() {\r\n \t\treturn React.createElement(Tab, {ref: \"tab\", icon: this.props.icon, title: this.props.title, \r\n    showToolbar: this.props.showToolbar, \r\n    showFooter: this.props.showFooter}, \r\n        React.createElement(Content, null, \r\n          this.renderContent()\r\n        ), \r\n        React.createElement(Footer, null\r\n        )\r\n    )\r\n  }\r\n});\r\n\r\nmodule.exports=KWICTab;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\n\r\nvar TextFooter=React.createClass({displayName: \"TextFooter\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\taction:React.PropTypes.func.isRequired\r\n\t}\r\n\t,render:function(){\r\n\t   \tif (this.props.editing) {\r\n     \t return ( React.createElement(\"div\", {style: {display:\"flex\"}}, \r\n        \tReact.createElement(\"button\", {style: {marginLeft:\"auto\"}}, \"apply Changes\")\r\n        \t));\r\n   \t\t } else {\r\n      \t\treturn React.createElement(\"button\", null, \"dictionary\")\r\n   \t\t }\t\r\n\t}\r\n});\r\n\r\nmodule.exports=TextFooter;\r\n",
    "var React=require(\"react/addons\");\r\nvar E=React.createElement;\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar ksa=require(\"ksana-simple-api\");\r\nvar ReactPanels=require(\"react-panels\");\r\nvar Tab = ReactPanels.Tab;\r\nvar TabWrapperMixin = ReactPanels.Mixins.TabWrapper;\r\nvar Toolbar = ReactPanels.Toolbar;\r\nvar Content = ReactPanels.Content;\r\nvar Footer = ReactPanels.Footer;\r\nvar ToggleButton = ReactPanels.ToggleButton;\r\n\r\nvar TextContent=require(\"../views/textcontent\");\r\nvar TextToolbar=require(\"./texttoolbar\");\r\nvar TextFooter=require(\"./textfooter\");\r\nvar action=require(\"../actions/texts\");\r\nvar renderTags=[\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"h7\",\"h8\",\"h9\"];\r\nvar TextTab = React.createClass({\r\n  displayName: 'TextTab'\r\n  ,getInitialState:function() {\r\n  \treturn {segment:{}};\r\n  }\r\n  ,mixins: [TabWrapperMixin,PureRenderMixin]\r\n  ,fetchText:function(trait) {\r\n    ksa.fetch({db:trait.db,uti:trait.uti,q:trait.q,renderTags:renderTags},function(err,segments){\r\n        this.setState({segment:segments[0]})\r\n    }.bind(this));\r\n  } \r\n  ,componentWillReceiveProps:function(nextProps){\r\n    this.fetchText(nextProps.trait);\r\n  }\r\n  ,componentDidMount:function() {\r\n    this.fetchText(this.props.trait);\r\n  }  \r\n  ,renderContent:function() {\r\n  \treturn E(TextContent ,{text:this.state.segment.text,hits:this.state.segment.hits});\r\n  }\r\n  ,changeTab:function(uti) {\r\n    var db=this.props.trait.db;\r\n    if (db.indexOf(\"/\")>-1) db=db.substr(db.indexOf(\"/\")+1);\r\n    if (uti) {\r\n      var title=db+\":\"+uti;\r\n      var newtrait={key:title,title:title,db:db,uti:uti,q:this.props.trait.q};\r\n      action.closeAdd(this.props.trait.key,newtrait);\r\n    }\r\n  }\r\n  ,prevSeg:function() {\r\n    ksa.prevUti({db:this.props.trait.db,uti:this.state.segment.uti},function(err,prev){\r\n        this.changeTab(prev);  \r\n    }.bind(this));\r\n  }\r\n  ,nextSeg:function() {\r\n    ksa.nextUti({db:this.props.trait.db,uti:this.state.segment.uti},function(err,next){\r\n        this.changeTab(next);  \r\n    }.bind(this));\r\n  }\r\n  ,action:function(act,p1,p2) {\r\n    if (act===\"next\") this.nextSeg();\r\n    else if (act===\"prev\") this.prevSeg();\r\n  }\r\n  ,render:function() {\r\n \t\treturn React.createElement(Tab, {ref: \"tab\", icon: this.props.icon, title: this.props.title, \r\n    showToolbar: this.props.showToolbar, \r\n    showFooter: this.props.showFooter}, \r\n        React.createElement(Toolbar, null, \r\n          React.createElement(TextToolbar, {action: this.action})\r\n        ), \r\n        React.createElement(Content, null, \r\n          this.renderContent()\r\n        )\r\n    )\r\n  }\r\n});\r\n\r\nmodule.exports=TextTab;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\n\r\nvar TextToolbar=React.createClass({displayName: \"TextToolbar\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\taction:React.PropTypes.func.isRequired\r\n\t}\r\n\t,getDefaultProps:function(){\r\n\t\treturn {};\r\n\t}\r\n\t,prevSeg:function() {\r\n\t\tthis.props.action(\"prev\");\r\n\t}\r\n\t,nextSeg:function() {\r\n\t\tthis.props.action(\"next\");\r\n\t}\r\n\t,cloneTabInNewPanel:function() {\r\n\t\tthis.props.action(\"clone\");\t\r\n\t}\r\n\t,fontresize:function() {\r\n\t\tthis.props.action(\"fontresize\");\r\n\t}\r\n\t,toggleEdit:function() {\r\n\t\tthis.props.action(\"toggleedit\");\r\n\t}\t\r\n\t,resize:function() {\r\n\t\tthis.props.action(\"resize\");\r\n\t}\r\n\t,removeMarkup:function() {\r\n\t\tthis.props.action(\"removeMarkup\");\r\n\t}\r\n\t,render:function(){\r\n\t\tvar btnstyle={marginLeft:\"auto\"};\r\n\t\treturn (\r\n     \tReact.createElement(\"div\", {style: {display:\"flex\"}}, \r\n          React.createElement(\"button\", {onClick: this.prevSeg}, React.createElement(\"i\", {className: \"fa fa-chevron-left\"})), \r\n          React.createElement(\"button\", {title: \"change font size\", onClick: this.fontresize}, React.createElement(\"i\", {className: \"fa fa-font\"})), \r\n          React.createElement(\"button\", {onClick: this.nextSeg}, React.createElement(\"i\", {className: \"fa fa-chevron-right\"}))\r\n          )\t\r\n         );\r\n\t}   \r\n});\r\n\r\nmodule.exports=TextToolbar;\r\n",
    "var React=require(\"react/addons\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\nvar ReactPanels=require(\"react-panels\");\r\nvar Tab = ReactPanels.Tab;\r\nvar TabWrapperMixin = ReactPanels.Mixins.TabWrapper;\r\nvar Toolbar = ReactPanels.Toolbar;\r\nvar Content = ReactPanels.Content;\r\nvar Footer = ReactPanels.Footer;\r\nvar ToggleButton = ReactPanels.ToggleButton;\r\nvar store=require(\"../stores/toc\");\r\n\r\nvar TocContent=require(\"../views/toccontent\");\r\n\r\nvar TocTab=React.createClass({displayName: \"TocTab\",\r\n\tmixins: [Reflux.listenTo(store,\"onData\"),TabWrapperMixin,PureRenderMixin]\r\n\t,getInitialState:function() {\r\n\t\treturn {toc:[]};\r\n\t}\r\n\t,propTypes:{\r\n\t\tq:PT.string\r\n\t}\r\n\t,onData:function(data,dbid,tocname,q,hits) {\r\n\t\tthis.setState({toc:data,dbid:dbid,tocname:tocname,q:q,hits:hits});\r\n\t}\t\r\n\t,render:function() {\r\n\t\treturn React.createElement(Tab, {title: \"One\"}, \r\n        React.createElement(Content, null, React.createElement(TocContent, {dbid: this.state.dbid, \r\n        \tq: this.state.q, toc: this.state.toc, hits: this.state.hits}))\r\n      )\r\n\t}\r\n});\r\n\r\nmodule.exports=TocTab;",
    "var React=require(\"react/addons\");\r\nvar ReactPanels=require(\"react-panels\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar Reflux=require(\"reflux\");\r\n\r\nvar Panel = ReactPanels.Panel;\r\nvar Tab = ReactPanels.Tab;\r\nvar Content = ReactPanels.Content;\r\nvar Button = ReactPanels.Button;\r\n\r\nvar store=require(\"./stores/texts\");\r\nvar Welcome=require(\"./views/welcome\");\r\nvar defaultTabs=[React.createElement(Welcome, {key: \"welcome\"})];\r\nvar TextTab=require(\"./tabs/texttab\");\r\n\r\nvar action=require(\"./actions/texts\");\r\n\r\nvar TextPanel=React.createClass({displayName: \"TextPanel\",\r\n\tmixins:[Reflux.listenTo(store,\"onData\")]\r\n\t,getInitialState:function() {\r\n\t\treturn {traits:defaultTabs}\r\n\t}\r\n  ,propTypes:{\r\n    action:PT.func.isRequired\r\n  }\r\n  ,hideLeftPanel:function() {\r\n    this.props.action(\"hideLeftPanel\");\r\n  }\r\n  ,hideBottomPanel:function() {\r\n    this.props.action(\"hideBottomPanel\");\r\n  }  \r\n  ,showLeftPanel:function() {\r\n    this.props.action(\"showLeftPanel\");\r\n  }\r\n  ,showBottomPanel:function() {\r\n    this.props.action(\"showBottomPanel\");\r\n  }  \r\n\t,panelbuttons:function(){\r\n\t\treturn React.createElement(Button, {title: \"Remove active tab\", onButtonClick: this.closeTab}, \r\n            React.createElement(\"i\", {className: \"fa fa-times\"})\r\n          )\r\n  }\r\n  ,leftbuttons:function(){\r\n    var prop1=this.props.leftPanelShown?{onButtonClick:this.hideLeftPanel}:{onButtonClick:this.showLeftPanel};\r\n   // var prop2=this.props.bottomPanelShown?{onButtonClick:this.hideBottomPanel}:{onButtonClick:this.showBottomPanel};\r\n    var cls1=this.props.leftPanelShown?\"fa fa-chevron-left\":\"fa fa-chevron-right\";\r\n   // var cls2=this.props.bottomPanelShown?\"fa fa-chevron-up\":\"fa fa-chevron-down\";\r\n\r\n    return [// E(Button,prop2,E(\"i\",{className:cls2})),\r\n            E(Button,prop1,E(\"i\",{className:cls1}))\r\n    ];\r\n  }  \r\n  ,closeTab:function(e){\r\n    var selectedIndex = this.refs.panel.getSelectedIndex();\r\n    var tabkey=this.state.traits[selectedIndex].key;\r\n    action.remove(tabkey);\r\n  }\r\n  ,onData:function(data,newly){\r\n  \tif (!data.length) {\r\n  \t\tthis.setState({traits:defaultTabs})\r\n  \t} else {\r\n  \t\tthis.setState({traits:data});\r\n  \t}\r\n  }\r\n  ,renderTab:function(trait,idx) {\r\n  \tif (React.isValidElement(trait)) {\r\n  \t\treturn trait;\r\n  \t} else {\r\n  \t\tvar component=trait.Component||TextTab;\r\n\t\t\treturn E(component,{key:idx,title:trait.title,trait:trait});\r\n  \t}\r\n  },\r\n\trender:function() {\r\n \t\treturn React.createElement(Panel, {ref: \"panel\", theme: \"flexbox\", buttons: [this.panelbuttons()], \r\n      leftButtons: this.leftbuttons()}, \r\n\t \t\tthis.state.traits.map(this.renderTab)\r\n    )\r\n\t}\r\n});\r\nmodule.exports=TextPanel;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\n\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar DBListItem=require(\"./dblistitem\");\r\nvar styles={\r\n\tcontainer:{height:\"99%\",overflowY:\"auto\",overflowX:\"hidden\"}\r\n}\r\nvar DBListContent=React.createClass({displayName: \"DBListContent\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\tdatabases:PT.array.isRequired\r\n\t\t,action:PT.func.isRequired\r\n\t\t,tofind:PT.string.isRequired\r\n\t}\t\r\n\t,renderItem:function(db,idx){\r\n\t\treturn React.createElement(DBListItem, {action: this.props.action, key: idx, db: db, tofind: this.props.tofind})\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"div\",{style:styles.container},\r\n\t\t\tthis.props.databases.map(this.renderItem)\r\n\t\t);\r\n\t}\r\n});\r\nmodule.exports=DBListContent;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar action_kwic=require(\"../actions/kwic\");\r\nvar action_toc=require(\"../actions/toc\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar HoverLink=require(\"./hoverlink\");\r\n\r\nvar styles={\r\n\tdbitem:{color:\"white\",display:\"flex\",fontSize:\"150%\",borderBottom:\"solid 1px black\"}\r\n\t,name:{flex:3}\r\n\t,hits:{flex:2}\r\n}\r\n\r\nvar DBListItem=React.createClass({displayName: \"DBListItem\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\taction:PT.func.isRequired\r\n\t\t,tofind:PT.string.isRequired\r\n\t}\r\n\t,showKWIC:function(e){\r\n\t\tthis.props.action(\"openkwic\");\r\n\t\taction_kwic.open(this.props.db.fullname,this.props.tofind,{range:{start:0}});\r\n\t}\r\n\t,showTOC:function(e) {\r\n\t\tthis.props.action(\"opentoc\");\t\r\n\t\taction_toc.open(this.props.db.fullname,this.props.tofind);\r\n\t}\r\n\t,render:function() {\r\n\t\tvar db=this.props.db;\r\n\t\treturn React.createElement(\"div\", {style: styles.dbitem}, \r\n\t\t\tReact.createElement(\"span\", {onClick: this.showTOC, style: styles.name}, React.createElement(HoverLink, null, db.shortname)), \r\n\t\t\tReact.createElement(\"span\", {onClick: this.showKWIC, style: styles.hits}, React.createElement(HoverLink, null, db.hits))\r\n\t\t\t)\r\n\t}\r\n});\r\n\r\nmodule.exports=DBListItem;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar action=require(\"../actions/databases\");\r\n\r\nvar styles={\r\n\ttofind: {fontSize:\"200%\",borderRadius:\"10px\",outline:0,border: \"solid 1px #dcdcdc\"}\r\n}\r\nvar TextContent=React.createClass({displayName: \"TextContent\",\r\n\tmixins:[PureRenderMixin]\r\n\t,getInitialState:function(){\r\n\t\treturn {tofind:''}\r\n\t}\r\n\t,propTypes:{\r\n\t\tonTofindChange:PT.func\r\n\t}\r\n\t,onKeyPress:function(e) {\r\n\t\tif (e.key==\"Enter\") {\r\n\t\t\tthis.dosearch();\r\n\t\t}\r\n\t}\r\n\t,componentDidMount:function() {\r\n\t\tsetTimeout(function(){\r\n\t\t\tthis.refs.tofind.getDOMNode().focus();\t\r\n\t\t}.bind(this),500);\r\n\t}\r\n\t,dosearch:function() {\r\n\t\taction.search(this.state.tofind);\r\n\t\tif (this.props.onTofindChange) this.props.onTofindChange(this.state.tofind);\r\n\t}\r\n\t,onChange:function(e) {\r\n\t\tthis.setState({tofind:e.target.value});\r\n\t\tclearTimeout(this.timer);\r\n\t\tthis.timer=setTimeout(function(){\r\n\t\t\tthis.dosearch();\r\n\t\t}.bind(this),500);\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"div\",{},\r\n\t\t\tE(\"input\",{ref:\"tofind\",style:styles.tofind,size:5,\r\n\t\t\t\tonKeyPress:this.onKeyPress,onChange:this.onChange,value:this.state.tofind})\r\n\t\t);\r\n\t}\r\n});\r\nmodule.exports=TextContent;",
    "/**\r\n\tenclose a text to enable hover effect\r\n\tusage:\r\n\t\t<span onclick={} style={}><HoverLink>text</HoverLink</span>\r\n*/\r\nvar React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\n\r\nvar styles={\r\n\tenter:{\r\n\t\tbackground:'highlight'\r\n\t\t,color:'highlightText'\r\n\t\t,borderRadius:'5px'\r\n\t\t,cursor:'pointer'\r\n\t}\r\n\t,leave:{\r\n\t\tbackground:null\r\n\t\t,color:null\r\n\t\t,cursor:''\r\n\t} \r\n}\r\nvar HoverLink=React.createClass({displayName: \"HoverLink\",\r\n\tmixins:[PureRenderMixin]\r\n\t,onleave:function(e) {\r\n\t\tfor (var i in styles.leave) e.target.style[i]=styles.leave[i];\r\n\t}\r\n\t,onenter:function(e) {\r\n\t\tfor (var i in styles.enter) e.target.style[i]=styles.enter[i];\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"span\",{onMouseLeave:this.onleave,onMouseEnter:this.onenter},this.props.children);\r\n\t}\r\n});\r\nmodule.exports=HoverLink;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar HoverLink=require(\"./hoverlink\");\r\nvar action=require(\"../actions/texts\");\r\n\r\nvar styles={\r\n\tcontainer:{height:\"20%\",color:\"white\",overflowY:\"auto\",overflowX:\"hidden\"}\r\n}\r\nvar KWIC=React.createClass({displayName: \"KWIC\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\texcerpts:PT.array.isRequired\r\n\t}\r\n\t,opentext:function(e) {\r\n\t\tvar n=e.target.parentElement.dataset.n;\r\n\t\tvar excerpt=this.props.excerpts[n];\r\n\t\tvar db=this.props.db;\r\n\t\tif (db.indexOf(\"/\")>-1) db=db.substr(db.indexOf(\"/\")+1);\r\n\t\tvar key=db+\":\"+excerpt.uti;\r\n\t\tvar title=key;\r\n\t\taction.add({db:this.props.db\r\n\t\t\t,q:this.props.q\r\n\t\t\t,uti:excerpt.uti\r\n\t\t\t,title:title\r\n\t\t\t,key:key\r\n\t\t});\r\n\t}\r\n  ,highlight:function(text,hits){\r\n    var ex=0,out=[];\r\n    for (var i=0;i<hits.length;i++) {\r\n      var now=hits[i][0];\r\n      if (now>ex) {\r\n        out.push(React.createElement(\"span\", {key: ex}, text.substring(ex,now)));\r\n      }\r\n      out.push(React.createElement(\"span\", {key: \"h\"+ex, className: \"hl\"+hits[i][2]}, \r\n        text.substr(now,hits[i][1])));\r\n      ex=now+=hits[i][1];\r\n    }\r\n    out.push(React.createElement(\"span\", {key: ex}, text.substr(ex)));\r\n    return out;\r\n  } \r\n\t,renderExcerpt:function(item,idx) {\r\n\t\treturn E(\"div\",{key:idx}\r\n\t\t\t,E(\"span\",{\"data-n\":idx,onClick:this.opentext},E(HoverLink,{},item.uti))\r\n\t\t\t,this.highlight(item.text,item.hits)\r\n\t\t);\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"div\",{style:styles.container},\r\n\t\t\tthis.props.excerpts.map(this.renderExcerpt)\r\n\t\t);\r\n\t}\r\n});\r\nmodule.exports=KWIC;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\nvar PT=React.PropTypes;\r\nvar E=React.createElement;\r\nvar styles={\r\n  container:{height:\"65%\",overflowY:\"auto\",overflowX:\"hidden\",color:\"white\",fontSize:\"150%\"}\r\n}\r\nvar TextContent=React.createClass({displayName: \"TextContent\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\ttext:PT.string.isRequired\r\n\t\t,hits:PT.array\r\n\t}\r\n\t,getDefaultProps:function() {\r\n\t\treturn {hits:[],text:\"\"};\r\n\t}\r\n  ,highlight:function(text,hits){\r\n    var ex=0,out=[];\r\n    for (var i=0;i<hits.length;i++) {\r\n      var now=hits[i][0];\r\n      if (now>ex) {\r\n        out.push(React.createElement(\"span\", {key: ex}, text.substring(ex,now)));\r\n      }\r\n      out.push(React.createElement(\"span\", {key: \"h\"+ex, className: \"hl\"+hits[i][2]}, \r\n        text.substr(now,hits[i][1])));\r\n      ex=now+=hits[i][1];\r\n    }\r\n    out.push(React.createElement(\"span\", {key: ex}, text.substr(ex)));\r\n    return out;\r\n  } \r\n\t,render:function() {\r\n\t\treturn E(\"div\",{style:styles.container}, this.highlight(this.props.text,this.props.hits));\r\n\t}\r\n});\r\nmodule.exports=TextContent;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\nvar E=React.createElement;\r\nvar PT=React.PropTypes;\r\nvar kde=require(\"ksana-database\");\r\nvar TreeToc=require(\"ksana2015-treetoc\").Component;\r\nvar action=require(\"../actions/texts\");\r\nvar action_kwic=require(\"../actions/kwic\");\r\nvar styles={\r\n\tcontainer:{overflowY:\"auto\",height:\"99%\",overflowX:\"hidden\",color:\"white\"}\r\n}\r\nvar TocContent=React.createClass({displayName: \"TocContent\",\r\n\tmixins:[PureRenderMixin]\r\n\t,propTypes:{\r\n\t\ttoc:PT.array.isRequired\r\n\t\t,hits:PT.array\r\n\t\t,q:PT.string\r\n\t\t,dbid:PT.string\r\n\t}\r\n\t,openkwic:function(tocid,tocitem){\r\n\t\taction_kwic.open(this.props.dbid,this.props.q,{range:{start:tocitem.vpos,end:tocitem.end}});\r\n\t}\r\n\t,opentext:function(tocid,tocitem){\r\n\t\tkde.open(this.props.dbid,function(err,db){\r\n\t\t\tvar fseg=db.fileSegFromVpos(tocitem.vpos);\r\n\t\t\tfseg.seg--;\r\n\t\t\tvar absseg=db.fileSegToAbsSeg(fseg.file,fseg.seg);\r\n\t\t\tvar seg=fseg.seg, segnames=db.get(\"segnames\");\r\n\t\t\tvar title=db.dbname+\":\"+segnames[absseg];\r\n\t\t\tvar key=title;\r\n\t\t\tif (segnames[absseg]===\"_\") {\r\n\t\t\t\tvar title=db.dbname+\":\"+segnames[absseg];\r\n\t\t\t\tseg++;\r\n\t\t\t}\r\n\t\t\taction.add({key:key,title:title,engine:db,dbid:db.dbname,\r\n\t\t\t\tfile:fseg.file,seg:seg,q:this.props.q});\r\n\t\t}.bind(this));\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"div\",{style:styles.container},\r\n\t\t\tE(TreeToc,{onSelect:this.opentext,onHitClick:this.openkwic,\r\n\t\t\t\ttoc:this.props.toc,hits:this.props.hits})\r\n\t\t);\r\n\t}\r\n});\r\nmodule.exports=TocContent;",
    "var React=require(\"react/addons\");\r\nvar PureRenderMixin=React.addons.PureRenderMixin;\r\nvar Reflux=require(\"reflux\");\r\nvar E=React.createElement;\r\nvar styles={\r\n\tcontainer:{height:\"100%\",color:\"white\"}\r\n}\r\nvar Welcome=React.createClass({displayName: \"Welcome\",\r\n\trender:function() {\r\n\t\treturn E(\"div\",{style:styles.container},\"WELCOME\");\r\n\t}\r\n});\r\nmodule.exports=Welcome;",
    "var React=require(\"react\");\r\nvar E=React.createElement;\r\nvar linecount=function(t) {\r\n\tvar lcount=0;\r\n\tt.replace(/\\n/g,function(){\r\n\t\tlcount++;\r\n\t})\r\n\treturn lcount+2;\r\n}\r\nvar AddNode=React.createClass({\r\n\tpropTypes:{\r\n\t\taction: React.PropTypes.func.isRequired\r\n\t}\r\n\t,addingkeydown:function(e) {\r\n\t\tvar t=e.target.value;\r\n\t\tif (e.key==\"Enter\" && t.charCodeAt(t.length-1)==10) {\r\n\t\t\tthis.props.action(\"addnode\",t.trim().split(\"\\n\"),this.props.insertBefore);\r\n\t\t}\r\n\t\tvar lc=linecount(t);\r\n\t\te.target.rows=lc;\r\n\t}\r\n\t,componentDidMount:function() {\r\n\t\tthis.refs.adding.getDOMNode().focus();\r\n\t}\r\n\t,render:function(){\r\n\t\treturn E(\"div\", {}, \r\n\t\t\tE(\"textarea\",\r\n\t\t\t\t{onKeyDown:this.addingkeydown,ref:\"adding\"\r\n\t\t\t\t ,placeholder:\"Enter twice to finish adding\",defaultValue:\"\"}\r\n\t\t));\r\n\t}\r\n\r\n})\r\n\r\nmodule.exports=AddNode;",
    "var React=require(\"react\");\r\nvar E=React.createElement;\r\n\r\nvar Controls=React.createClass({\r\n\tpropTypes:{\r\n\t\tenabled:React.PropTypes.array.isRequired\r\n\t\t,action:React.PropTypes.func.isRequired\r\n\t}\r\n\t,getDefaultProps:function(){\r\n\t\treturn {enabled:[]};\r\n\t}\r\n\t,enb:function(name) {\r\n\t\treturn this.props.enabled.indexOf(name)===-1;\t\t\r\n\t}\r\n\t,act:function(name) {\r\n\t\tvar that=this;\r\n\t\treturn function(e){\r\n\t\t\tthat.props.action(name,e.ctrlKey);\r\n\t\t}\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"span\",{},\r\n\t\t\tE(\"button\" ,{onClick:this.act(\"addingnode\"),title:\"Create a new node below, press Ctrl to above here.\"},\"\"),\r\n\t\t\tE(\"button\",{style:{visibility:\"hidden\"}},\" \"),\r\n\t\t\tE(\"button\" ,{onClick:this.act(\"levelup\"),title:\"level -1\",disabled:this.enb(\"levelup\")},\"\"),\r\n\t\t\tE(\"button\" ,{onClick:this.act(\"leveldown\"),title:\"level +1\",disabled:this.enb(\"leveldown\")},\"\")\r\n\t\t);\r\n\t}\r\n})\r\n\r\nmodule.exports=Controls;",
    "/*\r\n   toc data format\r\n   array of { d:depth, o:opened, t:text, n:next_same_level ]\r\n\r\n   only first level can be 0\r\n\r\n   TODO, do not write directly to props.toc\r\n*/\r\nvar React=require(\"react\");\r\nvar TreeNode=require(\"./treenode\");\r\nvar E=React.createElement;\r\nvar manipulate=require(\"./manipulate\");\r\n\r\nvar buildToc = function(toc) {\r\n\tif (!toc || !toc.length || toc.built) return;\r\n\tvar depths=[];\r\n \tvar prev=0;\r\n \tif (toc.length>1) {\r\n \t\ttoc[0].o=true;//opened\r\n \t}\r\n \tfor (var i=0;i<toc.length;i++) delete toc[i].n;\r\n\tfor (var i=0;i<toc.length;i++) {\r\n\t    var depth=toc[i].d||toc[i].depth;\r\n\t    if (prev>depth) { //link to prev sibling\r\n\t      if (depths[depth]) toc[depths[depth]].n = i;\r\n\t      for (var j=depth;j<prev;j++) depths[j]=0;\r\n\t    }\r\n    \tdepths[depth]=i;\r\n    \tprev=depth;\r\n\t}\r\n\ttoc.built=true;\r\n\treturn toc;\r\n}\r\nvar genToc=function(toc,title) {\r\n    var out=[{depth:0,text:title||ksana.js.title}];\r\n    if (toc.texts) for (var i=0;i<toc.texts.length;i++) {\r\n      out.push({t:toc.texts[i],d:toc.depths[i], vpos:toc.vpos[i]});\r\n    }\r\n    return out;\r\n}\r\n\r\nvar TreeToc=React.createClass({\r\n\tpropTypes:{\r\n\t\ttoc:React.PropTypes.array.isRequired  //core toc dataset\r\n\t\t,opts:React.PropTypes.object    \r\n\t\t,onSelect:React.PropTypes.func  //user select a treenode\r\n\t\t,tocid:React.PropTypes.string  //toc view \r\n\t\t,styles:React.PropTypes.object //custom styles\r\n\t}\r\n\t,getInitialState:function(){\r\n\t\treturn {editcaption:-1,selected:[]};\r\n\t}\r\n\t,clearHits:function() {\r\n\t\tfor (var i=0;i<this.props.toc;i++) {\r\n\t\t\tif (this.props.toc[i].hit) delete this.props.toc[i].hit;\r\n\t\t}\r\n\t}\r\n\t,componentDidMount:function() {\r\n\t\tbuildToc(this.props.toc);\r\n\t}\r\n\t,componentWillReceiveProps:function(nextProps) {\r\n\t\tif (nextProps.toc && !nextProps.toc.built) {\r\n\t\t\tbuildToc(nextProps.toc);\r\n\t\t}\r\n\t\tif (nextProps.hits!==this.props.hits) {\r\n\t\t\tthis.clearHits();\r\n\t\t}\r\n\t}\r\n\t,getDefaultProps:function() {\r\n\t\treturn {opts:{}};\r\n\t}\r\n\t,action:function() {\r\n\t\tvar args=Array.prototype.slice.apply(arguments);\r\n\t\tvar act=args.shift();\r\n\t\tvar p1=args[0];\r\n\t\tvar p2=args[1];\r\n\t\tvar sels=this.state.selected;\r\n\t\tvar toc=this.props.toc;\r\n\t\tvar r=false;\r\n\t\tif (act===\"updateall\") {\r\n\t\t\tthis.setState({editcaption:-1,deleting:-1});\r\n\t\t} else if (act===\"editcaption\") {\r\n\t\t\tvar n=parseInt(p1);\r\n\t\t\tthis.setState({editcaption:n,selected:[n]});\r\n\t\t} else if (act===\"deleting\") {\r\n\t\t\tthis.setState({deleting:this.state.editcaption});\r\n\t\t} else if (act===\"changecaption\") {\r\n\t\t\tif (!this.state.editcaption===-1) return;\r\n\t\t\tif (!p1) {\r\n\t\t\t\tthis.action(\"deleting\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.toc[this.state.editcaption].t=p1;\r\n\t\t\t\tthis.setState({editcaption:-1});\r\n\t\t\t}\r\n\t\t} else if (act===\"select\") {\r\n\t\t\tvar selected=this.state.selected;\r\n\t\t\tif (!(this.props.opts.multiselect && p2)) {\r\n\t\t\t\tselected=[];\r\n\t\t\t}\r\n\t\t\tvar n=parseInt(p1);\r\n\t\t\tif (n>0) selected.push(n);\r\n\t\t\tthis.props.onSelect&&this.props.onSelect(this.props.tocid,this.props.toc[n],n,this.props.toc);\r\n\t\t\tthis.setState({selected:selected,editcaption:-1,deleting:-1,adding:0});\r\n\t\t} else if (act===\"addingnode\") {\r\n\t\t\tvar insertAt=sels[0];\r\n\t\t\tif (p1) {\r\n\t\t\t\tinsertAt=-insertAt; //ctrl pressed insert before\r\n\t\t\t}\r\n\t\t\tthis.setState({adding:insertAt,editcaption:-1});\r\n\t\t} else if (act==\"addnode\") {\r\n\t\t\tvar n=this.state.selected[0];\r\n\t\t\tr=manipulate.addNode(toc,n,p1,p2)\r\n\t\t}else if (act===\"levelup\") r=manipulate.levelUp(sels,toc);\r\n\t\telse if (act===\"leveldown\") r=manipulate.levelDown(sels,toc);\r\n\t\telse if (act===\"deletenode\") r=manipulate.deleteNode(sels,toc);\r\n\t\telse if (act===\"hitclick\") {\r\n\t\t\tthis.props.onHitClick&&this.props.onHitClick(this.props.tocid,this.props.toc[p1],p1,this.props.toc);\r\n\t\t}\r\n\t\tif (r) {\r\n\t\t\tbuildToc(toc);\r\n\t\t\tthis.setState({editcaption:-1,deleting:-1,adding:0});\r\n\t\t\tif (act===\"deletenode\") this.setState({selected:[]});\r\n\t\t}\r\n\t}\r\n\t,render:function() {\r\n\t\treturn E(\"div\",{},\r\n\t\t\tE(TreeNode,{toc:this.props.toc,\r\n\t\t\t\teditcaption:this.state.editcaption,\r\n\t\t\t\tdeleting:this.state.deleting,\r\n\t\t\t\tselected:this.state.selected,\r\n\t\t\t\tstyles:this.props.styles,\r\n\t\t\t\tadding:this.state.adding,\r\n\t\t\t\taction:this.action,opts:this.props.opts,cur:0,\r\n\t\t\t\thits:this.props.hits}));\r\n\t}\r\n})\r\nmodule.exports={Component:TreeToc,genToc:genToc,buildToc:buildToc};\r\n",
    "var descendantOf=function(n,toc) { /* returning all descendants */\r\n\tvar d=toc[n].d;\r\n\tn++;\r\n\twhile (n<toc.length) {\r\n\t\tif (toc[n].d<=d) return n;\r\n\t\tn++;\r\n\t}\r\n\treturn toc.length-1;\r\n}\r\nvar levelUp =function(sels,toc) { //move select node and descendants one level up\r\n\tif (!canLevelup(sels,toc))return;\r\n\tvar n=sels[0];\r\n\tvar cur=toc[n];\r\n\tvar next=toc[n+1];\r\n\tvar nextsib=cur.n||descendantOf(n,toc);\r\n\tif (next && next.d>cur.d) { //has child\r\n\t\tfor (var i=n+1;i<nextsib;i++) {\r\n\t\t\ttoc[i].d--;\r\n\t\t}\r\n\t}\r\n\tcur.d--;\r\n\tcur.o=true;//force open this node , so that sibling is visible\r\n\treturn true;\r\n}\r\nvar levelDown =function(sels,toc) {\r\n\tif (!canLeveldown(sels,toc))return; //move select node descendants one level down\r\n\tvar n=sels[0];\r\n\tvar cur=toc[n];\r\n\tvar next=toc[n+1];\r\n\r\n\t//force open previous node as it becomes parent of this node\r\n\tvar p=prevSibling(n,toc);\r\n\tif (p) toc[p].o=true;\r\n\r\n\tif (!cur.o) { //do no move descendants if opened\r\n\t\tif (next && next.d>cur.d) { //has child\r\n\t\t\tfor (var i=n+1;i<cur.n;i++) {\r\n\t\t\t\ttoc[i].d++;\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\tcur.d++;\r\n\treturn true;\r\n}\r\n\r\nvar addNode =function(toc,n,newnodes,insertbefore) {\r\n\tvar d=toc[n].d;\r\n\tif (!insertbefore) {\r\n\t\ttoc[n].o=true;\r\n\t\tn++;\r\n\t}\r\n\tvar args=[n,0];\r\n\r\n\tfor (var i=0;i<newnodes.length;i++) {\r\n\t\targs.push({d:d,t:newnodes[i]});\r\n\t}\r\n\ttoc.splice.apply(toc,args);\r\n\treturn true;\r\n}\r\nvar deleteNode =function(sels,toc) {\r\n\tif (!canDeleteNode(sels,toc))return; //move select node descendants one level down\r\n\tvar n=sels[0];\r\n\tvar to=descendantOf(n,toc);\r\n\ttoc.splice(n,to-n);\r\n\treturn true;\r\n}\r\n\r\nvar canDeleteNode=function(sels,toc) {\r\n\tif (sels.length==0) return false;\r\n\tvar n=sels[0];\r\n\treturn (sels.length==1 && toc[n].d>0 && toc.length>2);\r\n}\r\nvar canLevelup=function(sels,toc) {\r\n\tif (sels.length==0) return false;\r\n\tvar n=sels[0];\r\n\treturn (sels.length==1 && toc[n].d>1);\r\n}\r\nvar prevSibling=function(n,toc) {\r\n\tvar p=n-1;\r\n\tvar d=toc[n].d;\r\n\twhile (p>0) {\r\n\t\tif (toc[p].d<d) return 0;\r\n\t\tif (toc[p].d==d) return p;\r\n\t\tp--;\r\n\t}\r\n}\r\nvar canLeveldown=function(sels,toc) {\r\n\tif (sels.length==0) return false;\r\n\tvar n=sels[0];\r\n\treturn (sels.length==1 && prevSibling(n,toc));\r\n}\r\nvar enabled=function(sels,toc) {\r\n\tvar enabled=[];\r\n\tif (canLeveldown(sels,toc)) enabled.push(\"leveldown\");\r\n\tif (canLevelup(sels,toc)) enabled.push(\"levelup\");\r\n\tif (canDeleteNode(sels,toc)) enabled.push(\"deletenode\");\r\n\treturn enabled;\r\n}\r\nmodule.exports={enabled:enabled,levelUp:levelUp,levelDown:levelDown,\r\n\taddNode:addNode,deleteNode:deleteNode,descendantOf:descendantOf};",
    "var React=require(\"react/addons\");\r\nvar E=React.createElement;\r\nvar update=React.addons.update;\r\nvar manipulate=require(\"./manipulate\");\r\nvar Controls=require(\"./controls\");\r\nvar AddNode=require(\"./addnode\");\r\nvar treenodehits=require(\"./treenodehits\");\r\nvar styles={\r\n\tselectedcaption:{cursor:\"pointer\",background:\"highlight\",borderRadius:\"5px\"}\r\n\t,caption:{cursor:\"pointer\"}\r\n\t,childnode:{left:\"15px\",position:\"relative\"}\r\n\t,rootnode:{position:\"relative\"}\r\n\t,folderbutton: {cursor:\"pointer\",borderRadius:\"50%\"}\r\n\t,closed:{cursor:\"pointer\",fontSize:\"75%\"}\r\n\t,opened:{cursor:\"pointer\",fontSize:\"75%\"}\t\r\n\t,leaf:{fontSize:\"75%\"}\t\r\n\t,hiddenleaf:{visibility:\"hidden\"}\t\r\n\t,deletebutton:{background:\"red\",color:\"yellow\"}\r\n\t,nodelink:{fontSize:\"65%\",cursor:\"pointer\"}\r\n\t,hit:{color:\"pink\",fontSize:\"65%\",cursor:\"pointer\"}\r\n};\r\n\r\n\r\nvar TreeNode=React.createClass({\r\n\tmixins:[React.addons.pureRenderMixin]\r\n\t,propTypes:{\r\n\t\ttoc:React.PropTypes.array.isRequired\r\n\t\t,opts:React.PropTypes.object\r\n\t\t,action:React.PropTypes.func.isRequired \r\n\t\t,selected:React.PropTypes.array         //selected treenode (multiple)\r\n\t\t,cur:React.PropTypes.number.isRequired //current active treenode\r\n\t\t,styles:React.PropTypes.object  //custom style\r\n\t}\r\n\t,getDefaultProps:function() {\r\n\t\treturn {cur:0,opts:{},toc:[]};\r\n\t}\r\n\t,click:function(e) {\r\n\t\tvar n=parseInt(e.target.parentElement.attributes['data-n'].value);\r\n\t\tthis.props.toc[n].o=!this.props.toc[n].o;\r\n\t\tthis.forceUpdate();\r\n\t\te.preventDefault();\r\n    e.stopPropagation();\r\n\t}\r\n\t,select:function(e){\r\n\t\tif (e.target.nodeName!==\"SPAN\") return;\r\n\t\tvar datan=e.target.parentElement.attributes['data-n'];\r\n\t\tif (!datan) return;\r\n\t\tvar n=parseInt(datan.value);\r\n\t\tvar selected=this.props.selected.indexOf(n)>-1;\r\n\t\tif (selected && this.props.opts.editable) {\r\n\t\t\tthis.props.action(\"editcaption\",n);\r\n\t\t} else {\r\n\t\t\tthis.props.action(\"select\",n,e.ctrlKey);\r\n\t\t}\r\n\t\te.preventDefault();\r\n    e.stopPropagation();\r\n\t}\r\n\t,componentWillReceiveProps:function(nextProps) {\r\n\t\tif (nextProps.styles && nextProps.styles!==this.props.styles) {\r\n\t\t\tstyles=update(styles,{$merge:nextProps.styles});\r\n\t\t}\r\n\t}\r\n\t,componentDidUpdate:function() {\r\n\t\tif (this.refs.editcaption) {\r\n\t\t\tvar dom=this.refs.editcaption.getDOMNode();\r\n\t\t\tdom.focus();\r\n\t\t\tdom.selectionStart=dom.value.length;\r\n\t\t}\r\n\t}\r\n\t,oninput:function(e) {\r\n\t\tvar size=e.target.value.length+2;;\r\n\t\tif (size<5) size=5;\r\n\t\te.target.size=size;\r\n\t}\r\n\r\n\t,editingkeydown:function(e) {\r\n\t\tif (e.key==\"Enter\") {\r\n\t\t\tthis.props.action(\"changecaption\",e.target.value);\t\r\n\t\t\te.stopPropagation();\r\n\t\t} else this.oninput(e);\r\n\t}\r\n\t,deleteNodes:function() {\r\n\t\tthis.props.action(\"deletenode\");\r\n\t}\r\n\t,renderDeleteButton:function(n) {\r\n\t\tvar childnode=null;\r\n\t\tvar children=manipulate.descendantOf(n,this.props.toc);\r\n\t\tif (children>n+1) childnode=E(\"span\",{},\" \"+(children-n)+\" nodes\");\r\n\t\tvar out=E(\"button\",{onClick:this.deleteNodes,style:styles.deletebutton},\"Delete\",childnode);\r\n\t\treturn out;\r\n\t}\r\n\t,mouseenter:function(e) {\r\n\t\te.target.style.background=\"highlight\";\r\n\t\te.target.style.oldcolor=e.target.style.color;\r\n\t\te.target.style.color=\"HighlightText\";\r\n\t\tvar t=e.target.innerHTML;\r\n\t\tif (t===\"\"||t===\"\") e.target.style.borderRadius=\"50%\";\r\n\t\telse e.target.style.borderRadius=\"5px\";\r\n\t}\r\n\t,mouseleave:function(e) {\r\n\t\te.target.style.background=\"none\";\r\n\t\te.target.style.color=e.target.style.oldcolor;\r\n\t}\r\n\t,renderFolderButton:function(n) {\r\n\t\tvar next=this.props.toc[n+1];\r\n\t\tvar cur=this.props.toc[n];\r\n\t\tvar folderbutton=null;\r\n\t\tvar props={style:styles.closed, onClick:this.click, onMouseEnter:this.mouseenter,onMouseLeave:this.mouseleave};\r\n\t\tif (cur.o) props.style=styles.opened;\r\n\t\tif (next && next.d>cur.d) { \r\n\t\t\tif (cur.o) folderbutton=E(\"a\",props,\"\");//\"\"\r\n\t\t\telse       folderbutton=E(\"a\",props,\"\");//\"\"\r\n\t\t} else {\r\n\t\t\tfolderbutton=E(\"a\",{ style:styles.hiddenleaf},\"\");\r\n\t\t}\r\n\t\treturn folderbutton;\r\n\t}\r\n\t,renderCaption:function(n) {\r\n\t\tvar cur=this.props.toc[n];\r\n\t\tvar stylename=\"caption\";\r\n\t\tif (this.props.selected.indexOf(n)>-1) stylename=\"selectedcaption\";\r\n\t\tvar caption=null;\r\n\t\tif (this.props.deleting===n) {\r\n\t\t\tcaption=this.renderDeleteButton(n);\r\n\t\t} else if (this.props.editcaption===n) {\r\n\t\t\tvar size=cur.t.length+2;\r\n\t\t\tif (size<5) size=5;\r\n\t\t\tcaption=E(\"input\",{onKeyDown:this.editingkeydown,\r\n\t\t\t\t               size:size,ref:\"editcaption\",defaultValue:cur.t});\r\n\t\t} else {\r\n\t\t\tcaption=E(\"span\",{onMouseEnter:this.mouseenter,onMouseLeave:this.mouseleave,\r\n\t\t\t\tstyle:styles[stylename],title:n},cur.t);\r\n\t\t}\r\n\t\treturn caption;\r\n\t}\r\n\t,renderAddingNode:function(n,above) {\r\n\t\tif (this.props.adding===n && n) { \r\n\t\t\treturn E(AddNode,{insertBefore:above,action:this.props.action});\r\n\t\t}\r\n\t}\r\n\t,renderEditControls:function(n) {\r\n\t\tif (!this.props.opts.editable) return;\r\n\t\tif (this.props.editcaption===n) {\t\r\n\t\t\tvar enabled=manipulate.enabled([n],this.props.toc);\r\n\t\t\treturn E(Controls,{action:this.props.action,enabled:enabled});\r\n\t\t} \r\n\t}\r\n\t,renderItem:function(e,idx){\r\n\t\tvar t=this.props.toc[e];\r\n\t\tvar props=update(this.props,{$merge:{key:\"k\"+idx,cur:e}});\r\n\t\treturn E(TreeNode,props);\r\n\t}\r\n\t,clickhit:function(e) {\r\n\t\tvar n=parseInt(e.target.dataset.n);\r\n\t\tthis.props.action(\"hitclick\",n);\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\t,renderHit:function(hit,n) {\r\n\t\tif (!hit) return;\r\n\t\treturn E(\"span\",{onClick:this.clickhit,style:styles.hit,\"data-n\":n,\r\n\t\t\tonMouseEnter:this.mouseenter,onMouseLeave:this.mouseleave},hit);\r\n\t}\r\n\t,render:function() {\r\n\t\tif (this.props.toc.length===0) return E(\"span\",{},\"\");\r\n\t\tvar n=this.props.cur;\r\n\t\tvar cur=this.props.toc[n];\r\n\t\tvar stylename=\"childnode\",children=[];\r\n\t\tvar selected=this.props.selected.indexOf(n)>-1;\r\n\t\tvar depthdeco=renderDepth(cur.d,this.props.opts)\r\n\t\tif (cur.d==0) stylename=\"rootnode\";\r\n\t\tvar adding_before_controls=this.renderAddingNode(-n,true);\r\n\t\tvar adding_after_controls=this.renderAddingNode(n);\r\n\t\tvar editcontrols=this.renderEditControls(n);\r\n\t\tvar folderbutton=this.renderFolderButton(n);\r\n\t\tif (cur.o) children=enumChildren(this.props.toc,n);\r\n\r\n\t\tvar extracomponent=this.props.opts.onNode&& this.props.opts.onNode(cur,selected,n);\r\n\t\tcaption=this.renderCaption(n);\r\n\t\tif (this.props.editcaption>-1 || this.props.deleting>-1) extracomponent=null;\r\n\t\tif (this.props.deleting>-1) editcontrols=null;\r\n\t\tvar hits=treenodehits(this.props.toc,this.props.hits,n);\r\n\r\n\t\treturn E(\"div\",{onClick:this.select,\"data-n\":n,style:styles[stylename]},\r\n\t\t\t   adding_before_controls,\r\n\t\t\t   folderbutton,depthdeco,\r\n\t\t\t   editcontrols,\r\n\t\t\t   caption,\r\n\t\t\t   this.renderHit(hits,n),\r\n\t\t\t   extracomponent,\r\n\t\t\t   adding_after_controls,\r\n\t\t\t   children.map(this.renderItem));\r\n\t}\r\n});\r\n\r\nvar ganzhi=\"\";\r\n\r\nvar renderDepth=function(depth,opts) {\r\n  var out=[];\r\n  if (opts&&opts.tocstyle==\"ganzhi\") {\r\n    return E(\"span\", null, ganzhi[depth].trim()+\" \");\r\n  } else {\r\n    if (opts&&opts.numberDepth && depth) return E(\"span\", null, depth, \".\")\r\n    else return null;\r\n  }\r\n  return null;\r\n};\r\n\r\n\r\nvar enumChildren=function(toc,cur) {\r\n    var children=[];\r\n    if (!toc || !toc.length || toc.length==1) return children;\r\n    thisdepth=toc[cur].d||toc[cur].depth;\r\n    if (cur==0) thisdepth=0;\r\n    if (cur+1>=toc.length) return children;\r\n    if ((toc[cur+1].d||toc[cur+1].depth)!= 1+thisdepth) {\r\n    \treturn children;  // no children node\r\n    }\r\n    var n=cur+1;\r\n    var child=toc[n];\r\n    \r\n    while (child) {\r\n      children.push(n);\r\n      var next=toc[n+1];\r\n      if (!next) break;\r\n      if ((next.d||next.depth)==(child.d||child.depth)) {\r\n        n++;\r\n      } else if ((next.d||next.depth)>(child.d||child.depth)) {\r\n        n=child.n||child.next;\r\n      } else break;\r\n      if (n) child=toc[n];else break;\r\n    }\r\n    return children;\r\n}\r\nmodule.exports=TreeNode;",
    "var rangeOfTreeNode=function(toc,n) {\r\n  //setting the ending vpos of a treenode\r\n  //this value is fixed when hits is changed, but not saved in kdb\r\n  if (typeof toc[n].end!==\"undefined\") return;\r\n\r\n  if (n+1>=toc.length) {\r\n    return;\r\n  }\r\n  var depth=toc[n].d , nextdepth=toc[n+1].d;\r\n  if (n==toc.length-1 || n==0) {\r\n      toc[n].end=Math.pow(2, 48);\r\n      return;\r\n  } else  if (nextdepth>depth){\r\n    if (toc[n].n) {\r\n      toc[n].end= toc[toc[n].n].vpos || Number.MAX_VALUE;  \r\n    } else { //last sibling\r\n      var next=n+1;\r\n      while (next<toc.length && toc[next].d>depth) next++;\r\n      if (next==toc.length) toc[n].end=Math.pow(2,48);\r\n      else toc[n].end=toc[next].voff;\r\n    }\r\n  } else { //same level or end of sibling\r\n    toc[n].end=toc[n+1].vpos;\r\n  }\r\n}\r\nvar calculateHit=function(toc,hits,n) {\r\n\r\n  var start=toc[n].vpos;\r\n  var end=toc[n].end;\r\n  if (n==0) {\r\n    return hits.length;\r\n  } else {\r\n    var hit=0;\r\n    for (var i=0;i<hits.length;i++) {\r\n      if (hits[i]>=start && hits[i]<end) hit++;\r\n    }\r\n    return hit;\r\n  }\r\n}\r\n\r\nvar treenodehits=function(toc,hits,n) {\r\n  if (!hits || !hits.length) return 0;\r\n\r\n  if (toc.length<2) return 0 ;\r\n\r\n  //need to clear toc[n].hit when hits is changed.\r\n  //see index.js clearHits()\r\n  if (typeof toc[n].hit!==\"undefined\") return toc[n].hit;\r\n\r\n  rangeOfTreeNode(toc,n);\r\n\r\n  return toc[n].hit=calculateHit(toc,hits,n);\r\n}\r\n\r\nmodule.exports=treenodehits;",
    "\r\nvar userCancel=false;\r\nvar files=[];\r\nvar totalDownloadByte=0;\r\nvar targetPath=\"\";\r\nvar tempPath=\"\";\r\nvar nfile=0;\r\nvar baseurl=\"\";\r\nvar result=\"\";\r\nvar downloading=false;\r\nvar startDownload=function(dbid,_baseurl,_files) { //return download id\r\n\tvar fs     = require(\"fs\");\r\n\tvar path   = require(\"path\");\r\n\r\n\t\r\n\tfiles=_files.split(\"\\uffff\");\r\n\tif (downloading) return false; //only one session\r\n\tuserCancel=false;\r\n\ttotalDownloadByte=0;\r\n\tnextFile();\r\n\tdownloading=true;\r\n\tbaseurl=_baseurl;\r\n\tif (baseurl[baseurl.length-1]!='/')baseurl+='/';\r\n\ttargetPath=ksanagap.rootPath+dbid+'/';\r\n\ttempPath=ksanagap.rootPath+\".tmp/\";\r\n\tresult=\"\";\r\n\treturn true;\r\n}\r\n\r\nvar nextFile=function() {\r\n\tsetTimeout(function(){\r\n\t\tif (nfile==files.length) {\r\n\t\t\tnfile++;\r\n\t\t\tendDownload();\r\n\t\t} else {\r\n\t\t\tdownloadFile(nfile++);\t\r\n\t\t}\r\n\t},100);\r\n}\r\n\r\nvar downloadFile=function(nfile) {\r\n\tvar url=baseurl+files[nfile];\r\n\tvar tmpfilename=tempPath+files[nfile];\r\n\tvar mkdirp = require(\"./mkdirp\");\r\n\tvar fs     = require(\"fs\");\r\n\tvar http   = require(\"http\");\r\n\r\n\tmkdirp.sync(path.dirname(tmpfilename));\r\n\tvar writeStream = fs.createWriteStream(tmpfilename);\r\n\tvar datalength=0;\r\n\tvar request = http.get(url, function(response) {\r\n\t\tresponse.on('data',function(chunk){\r\n\t\t\twriteStream.write(chunk);\r\n\t\t\ttotalDownloadByte+=chunk.length;\r\n\t\t\tif (userCancel) {\r\n\t\t\t\twriteStream.end();\r\n\t\t\t\tsetTimeout(function(){nextFile();},100);\r\n\t\t\t}\r\n\t\t});\r\n\t\tresponse.on(\"end\",function() {\r\n\t\t\twriteStream.end();\r\n\t\t\tsetTimeout(function(){nextFile();},100);\r\n\t\t});\r\n\t});\r\n}\r\n\r\nvar cancelDownload=function() {\r\n\tuserCancel=true;\r\n\tendDownload();\r\n}\r\nvar verify=function() {\r\n\treturn true;\r\n}\r\nvar endDownload=function() {\r\n\tnfile=files.length+1;//stop\r\n\tresult=\"cancelled\";\r\n\tdownloading=false;\r\n\tif (userCancel) return;\r\n\tvar fs     = require(\"fs\");\r\n\tvar mkdirp = require(\"./mkdirp\");\r\n\r\n\tfor (var i=0;i<files.length;i++) {\r\n\t\tvar targetfilename=targetPath+files[i];\r\n\t\tvar tmpfilename   =tempPath+files[i];\r\n\t\tmkdirp.sync(path.dirname(targetfilename));\r\n\t\tfs.renameSync(tmpfilename,targetfilename);\r\n\t}\r\n\tif (verify()) {\r\n\t\tresult=\"success\";\r\n\t} else {\r\n\t\tresult=\"error\";\r\n\t}\r\n}\r\n\r\nvar downloadedByte=function() {\r\n\treturn totalDownloadByte;\r\n}\r\nvar doneDownload=function() {\r\n\tif (nfile>files.length) return result;\r\n\telse return \"\";\r\n}\r\nvar downloadingFile=function() {\r\n\treturn nfile-1;\r\n}\r\n\r\nvar downloader={startDownload:startDownload, downloadedByte:downloadedByte,\r\n\tdownloadingFile:downloadingFile, cancelDownload:cancelDownload,doneDownload:doneDownload};\r\nmodule.exports=downloader;",
    "/* emulate filesystem on html5 browser */\r\nvar get_head=function(url,field,cb){\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.open(\"HEAD\", url, true);\r\n\txhr.onreadystatechange = function() {\r\n\t\t\tif (this.readyState == this.DONE) {\r\n\t\t\t\tcb(xhr.getResponseHeader(field));\r\n\t\t\t} else {\r\n\t\t\t\tif (this.status!==200&&this.status!==206) {\r\n\t\t\t\t\tcb(\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t};\r\n\txhr.send();\r\n}\r\nvar get_date=function(url,cb) {\r\n\tget_head(url,\"Last-Modified\",function(value){\r\n\t\tcb(value);\r\n\t});\r\n}\r\nvar get_size=function(url, cb) {\r\n\tget_head(url,\"Content-Length\",function(value){\r\n\t\tcb(parseInt(value));\r\n\t});\r\n};\r\nvar checkUpdate=function(url,fn,cb) {\r\n\tif (!url) {\r\n\t\tcb(false);\r\n\t\treturn;\r\n\t}\r\n\tget_date(url,function(d){\r\n\t\tAPI.fs.root.getFile(fn, {create: false, exclusive: false}, function(fileEntry) {\r\n\t\t\tfileEntry.getMetadata(function(metadata){\r\n\t\t\t\tvar localDate=Date.parse(metadata.modificationTime);\r\n\t\t\t\tvar urlDate=Date.parse(d);\r\n\t\t\t\tcb(urlDate>localDate);\r\n\t\t\t});\r\n\t\t},function(){\r\n\t\t\tcb(false);\r\n\t\t});\r\n\t});\r\n}\r\nvar download=function(url,fn,cb,statuscb,context) {\r\n\t var totalsize=0,batches=null,written=0;\r\n\t var fileEntry=0, fileWriter=0;\r\n\t var createBatches=function(size) {\r\n\t\tvar bytes=1024*1024, out=[];\r\n\t\tvar b=Math.floor(size / bytes);\r\n\t\tvar last=size %bytes;\r\n\t\tfor (var i=0;i<=b;i++) {\r\n\t\t\tout.push(i*bytes);\r\n\t\t}\r\n\t\tout.push(b*bytes+last);\r\n\t\treturn out;\r\n\t }\r\n\t var finish=function() {\r\n\t\t rm(fn,function(){\r\n\t\t\t\tfileEntry.moveTo(fileEntry.filesystem.root, fn,function(){\r\n\t\t\t\t\tsetTimeout( cb.bind(context,false) , 0) ;\r\n\t\t\t\t},function(e){\r\n\t\t\t\t\tconsole.log(\"failed\",e)\r\n\t\t\t\t});\r\n\t\t },this);\r\n\t };\r\n\t\tvar tempfn=\"temp.kdb\";\r\n\t\tvar batch=function(b) {\r\n\t\tvar abort=false;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\tvar requesturl=url+\"?\"+Math.random();\r\n\t\txhr.open('get', requesturl, true);\r\n\t\txhr.setRequestHeader('Range', 'bytes='+batches[b]+'-'+(batches[b+1]-1));\r\n\t\txhr.responseType = 'blob';\r\n\t\txhr.addEventListener('load', function() {\r\n\t\t\tvar blob=this.response;\r\n\t\t\tfileEntry.createWriter(function(fileWriter) {\r\n\t\t\t\tfileWriter.seek(fileWriter.length);\r\n\t\t\t\tfileWriter.write(blob);\r\n\t\t\t\twritten+=blob.size;\r\n\t\t\t\tfileWriter.onwriteend = function(e) {\r\n\t\t\t\t\tif (statuscb) {\r\n\t\t\t\t\t\tabort=statuscb.apply(context,[ fileWriter.length / totalsize,totalsize ]);\r\n\t\t\t\t\t\tif (abort) setTimeout( cb.bind(context,false) , 0) ;\r\n\t\t\t\t \t}\r\n\t\t\t\t\tb++;\r\n\t\t\t\t\tif (!abort) {\r\n\t\t\t\t\t\tif (b<batches.length-1) setTimeout(batch.bind(context,b),0);\r\n\t\t\t\t\t\telse                    finish();\r\n\t\t\t\t \t}\r\n\t\t\t \t};\r\n\t\t\t}, console.error);\r\n\t\t},false);\r\n\t\txhr.send();\r\n\t}\r\n\r\n\tget_size(url,function(size){\r\n\t\ttotalsize=size;\r\n\t\tif (!size) {\r\n\t\t\tif (cb) cb.apply(context,[false]);\r\n\t\t} else {//ready to download\r\n\t\t\trm(tempfn,function(){\r\n\t\t\t\t batches=createBatches(size);\r\n\t\t\t\t if (statuscb) statuscb.apply(context,[ 0, totalsize ]);\r\n\t\t\t\t API.fs.root.getFile(tempfn, {create: 1, exclusive: false}, function(_fileEntry) {\r\n\t\t\t\t\t\t\tfileEntry=_fileEntry;\r\n\t\t\t\t\t\tbatch(0);\r\n\t\t\t\t });\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nvar readFile=function(filename,cb,context) {\r\n\tAPI.fs.root.getFile(filename, {create: false, exclusive: false},function(fileEntry) {\r\n\t\tfileEntry.file(function(file){\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\treader.onloadend = function(e) {\r\n\t\t\t\tif (cb) cb.call(cb,this.result);\r\n\t\t\t};\r\n\t\t\treader.readAsText(file,\"utf8\");\r\n\t\t});\r\n\t}, console.error);\r\n}\r\n\r\nfunction createDir(rootDirEntry, folders,  cb) {\r\n  // Throw out './' or '/' and move on to prevent something like '/foo/.//bar'.\r\n  if (folders[0] == '.' || folders[0] == '') {\r\n    folders = folders.slice(1);\r\n  }\r\n  rootDirEntry.getDirectory(folders[0], {create: true}, function(dirEntry) {\r\n    // Recursively add the new subfolder (if we still have another to create).\r\n    if (folders.length) {\r\n      createDir(dirEntry, folders.slice(1),cb);\r\n    } else {\r\n\t\t\tcb();\r\n\t\t}\r\n  }, cb);\r\n};\r\n\r\n\r\nvar writeFile=function(filename,buf,cb,context){\r\n\tvar write=function(fileEntry){\r\n\t\tfileEntry.createWriter(function(fileWriter) {\r\n\t\t\tfileWriter.write(buf);\r\n\t\t\tfileWriter.onwriteend = function(e) {\r\n\t\t\t\tif (cb) cb.apply(cb,[buf.byteLength]);\r\n\t\t\t};\r\n\t\t}, console.error);\r\n\t}\r\n\r\n\tvar getFile=function(filename){\r\n\t\tAPI.fs.root.getFile(filename, {exclusive:true}, function(fileEntry) {\r\n\t\t\twrite(fileEntry);\r\n\t\t}, function(){\r\n\t\t\t\tAPI.fs.root.getFile(filename, {create:true,exclusive:true}, function(fileEntry) {\r\n\t\t\t\t\twrite(fileEntry);\r\n\t\t\t\t});\r\n\r\n\t\t});\r\n\t}\r\n\tvar slash=filename.lastIndexOf(\"/\");\r\n\tif (slash>-1) {\r\n\t\tcreateDir(API.fs.root, filename.substr(0,slash).split(\"/\"),function(){\r\n\t\t\tgetFile(filename);\r\n\t\t});\r\n\t} else {\r\n\t\tgetFile(filename);\r\n\t}\r\n}\r\n\r\nvar readdir=function(cb,context) {\r\n\tvar dirReader = API.fs.root.createReader();\r\n\tvar out=[],that=this;\r\n\tdirReader.readEntries(function(entries) {\r\n\t\tif (entries.length) {\r\n\t\t\tfor (var i = 0, entry; entry = entries[i]; ++i) {\r\n\t\t\t\tif (entry.isFile) {\r\n\t\t\t\t\tout.push([entry.name,entry.toURL ? entry.toURL() : entry.toURI()]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tAPI.files=out;\r\n\t\tif (cb) cb.apply(context,[out]);\r\n\t}, function(){\r\n\t\tif (cb) cb.apply(context,[null]);\r\n\t});\r\n}\r\nvar getFileURL=function(filename) {\r\n\tif (!API.files ) return null;\r\n\tvar file= API.files.filter(function(f){return f[0]==filename});\r\n\tif (file.length) return file[0][1];\r\n}\r\nvar rm=function(filename,cb,context) {\r\n\tvar url=getFileURL(filename);\r\n\tif (url) rmURL(url,cb,context);\r\n\telse if (cb) cb.apply(context,[false]);\r\n}\r\n\r\nvar rmURL=function(filename,cb,context) {\r\n\twebkitResolveLocalFileSystemURL(filename, function(fileEntry) {\r\n\t\tfileEntry.remove(function() {\r\n\t\t\tif (cb) cb.apply(context,[true]);\r\n\t\t}, console.error);\r\n\t},  function(e){\r\n\t\tif (cb) cb.apply(context,[false]);//no such file\r\n\t});\r\n}\r\nfunction errorHandler(e) {\r\n\tconsole.error('Error: ' +e.name+ \" \"+e.message);\r\n}\r\nvar initfs=function(grantedBytes,cb,context) {\r\n\twebkitRequestFileSystem(PERSISTENT, grantedBytes,  function(fs) {\r\n\t\tAPI.fs=fs;\r\n\t\tAPI.quota=grantedBytes;\r\n\t\treaddir(function(){\r\n\t\t\tAPI.initialized=true;\r\n\t\t\tcb.apply(context,[grantedBytes,fs]);\r\n\t\t},context);\r\n\t}, errorHandler);\r\n}\r\nvar init=function(quota,cb,context) {\r\n\tnavigator.webkitPersistentStorage.requestQuota(quota,\r\n\t\t\tfunction(grantedBytes) {\r\n\t\t\t\tinitfs(grantedBytes,cb,context);\r\n\t\t}, errorHandler\r\n\t);\r\n}\r\nvar queryQuota=function(cb,context) {\r\n\tvar that=this;\r\n\tnavigator.webkitPersistentStorage.queryUsageAndQuota(\r\n\t function(usage,quota){\r\n\t\t\tinitfs(quota,function(){\r\n\t\t\t\tcb.apply(context,[usage,quota]);\r\n\t\t\t},context);\r\n\t});\r\n}\r\nvar API={\r\n\tinit:init\r\n\t,readdir:readdir\r\n\t,checkUpdate:checkUpdate\r\n\t,rm:rm\r\n\t,rmURL:rmURL\r\n\t,getFileURL:getFileURL\r\n\t,writeFile:writeFile\r\n\t,readFile:readFile\r\n\t,download:download\r\n\t,get_head:get_head\r\n\t,get_date:get_date\r\n\t,get_size:get_size\r\n\t,getDownloadSize:get_size\r\n\t,queryQuota:queryQuota\r\n}\r\nmodule.exports=API;\r\n",
    "var appname=\"installer\";\r\nif (typeof ksana==\"undefined\") {\r\n\twindow.ksana={platform:\"chrome\"};\r\n\tif (typeof process!==\"undefined\" && \r\n\t\tprocess.versions && process.versions[\"node-webkit\"]) {\r\n\t\twindow.ksana.platform=\"node-webkit\";\r\n\t}\r\n}\r\nvar switchApp=function(path) {\r\n\tvar fs=require(\"fs\");\r\n\tpath=\"../\"+path;\r\n\tappname=path;\r\n\tdocument.location.href= path+\"/index.html\"; \r\n\tprocess.chdir(path);\r\n}\r\nvar downloader={};\r\nvar rootPath=\"\";\r\n\r\nvar deleteApp=function(app) {\r\n\tconsole.error(\"not allow on PC, do it in File Explorer/ Finder\");\r\n}\r\nvar username=function() {\r\n\treturn \"\";\r\n}\r\nvar useremail=function() {\r\n\treturn \"\"\r\n}\r\nvar runtime_version=function() {\r\n\treturn \"1.4\";\r\n}\r\n\r\n//copy from liveupdate\r\nvar jsonp=function(url,dbid,callback,context) {\r\n  var script=document.getElementById(\"jsonp2\");\r\n  if (script) {\r\n    script.parentNode.removeChild(script);\r\n  }\r\n  window.jsonp_handler=function(data) {\r\n    if (typeof data==\"object\") {\r\n      data.dbid=dbid;\r\n      callback.apply(context,[data]);    \r\n    }  \r\n  }\r\n  window.jsonp_error_handler=function() {\r\n    console.error(\"url unreachable\",url);\r\n    callback.apply(context,[null]);\r\n  }\r\n  script=document.createElement('script');\r\n  script.setAttribute('id', \"jsonp2\");\r\n  script.setAttribute('onerror', \"jsonp_error_handler()\");\r\n  url=url+'?'+(new Date().getTime());\r\n  script.setAttribute('src', url);\r\n  document.getElementsByTagName('head')[0].appendChild(script); \r\n}\r\n\r\n\r\nvar loadKsanajs=function(){\r\n\r\n\tif (typeof process!=\"undefined\" && !process.browser) {\r\n\t\tvar ksanajs=require(\"fs\").readFileSync(\"./ksana.js\",\"utf8\").trim();\r\n\t\tdownloader=require(\"./downloader\");\r\n\t\tksana.js=JSON.parse(ksanajs.substring(14,ksanajs.length-1));\r\n\t\trootPath=process.cwd();\r\n\t\trootPath=require(\"path\").resolve(rootPath,\"..\").replace(/\\\\/g,\"/\")+'/';\r\n\t\tksana.ready=true;\r\n\t} else{\r\n\t\tvar url=window.location.origin+window.location.pathname.replace(\"index.html\",\"\")+\"ksana.js\";\r\n\t\tjsonp(url,appname,function(data){\r\n\t\t\tksana.js=data;\r\n\t\t\tksana.ready=true;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nloadKsanajs();\r\n\r\nvar boot=function(appId,cb) {\r\n\tif (typeof appId==\"function\") {\r\n\t\tcb=appId;\r\n\t\tappId=\"unknownapp\";\r\n\t}\r\n\tif (!ksana.js && ksana.platform==\"node-webkit\") {\r\n\t\tloadKsanajs();\r\n\t}\r\n\tksana.appId=appId;\r\n\tvar timer=setInterval(function(){\r\n\t\t\tif (ksana.ready){\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\tcb();\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\n\r\nvar ksanagap={\r\n\tplatform:\"node-webkit\",\r\n\tstartDownload:downloader.startDownload,\r\n\tdownloadedByte:downloader.downloadedByte,\r\n\tdownloadingFile:downloader.downloadingFile,\r\n\tcancelDownload:downloader.cancelDownload,\r\n\tdoneDownload:downloader.doneDownload,\r\n\tswitchApp:switchApp,\r\n\trootPath:rootPath,\r\n\tdeleteApp: deleteApp,\r\n\tusername:username, //not support on PC\r\n\tuseremail:username,\r\n\truntime_version:runtime_version,\r\n\tboot:boot\r\n}\r\nmodule.exports=ksanagap;",
    "var started=false;\r\nvar timer=null;\r\nvar bundledate=null;\r\nvar get_date=require(\"./html5fs\").get_date;\r\nvar checkIfBundleUpdated=function() {\r\n\tget_date(\"bundle.js\",function(date){\r\n\t\tif (bundledate &&bundledate!=date){\r\n\t\t\tlocation.reload();\r\n\t\t}\r\n\t\tbundledate=date;\r\n\t});\r\n}\r\nvar livereload=function() {\r\n\tif(window.location.origin.indexOf(\"//127.0.0.1\")===-1) return;\r\n\r\n\tif (started) return;\r\n\r\n\ttimer1=setInterval(function(){\r\n\t\tcheckIfBundleUpdated();\r\n\t},2000);\r\n\tstarted=true;\r\n}\r\n\r\nmodule.exports=livereload;",
    "function mkdirP (p, mode, f, made) {\r\n     var path = nodeRequire('path');\r\n     var fs = nodeRequire('fs');\r\n\t\r\n    if (typeof mode === 'function' || mode === undefined) {\r\n        f = mode;\r\n        mode = 0x1FF & (~process.umask());\r\n    }\r\n    if (!made) made = null;\r\n\r\n    var cb = f || function () {};\r\n    if (typeof mode === 'string') mode = parseInt(mode, 8);\r\n    p = path.resolve(p);\r\n\r\n    fs.mkdir(p, mode, function (er) {\r\n        if (!er) {\r\n            made = made || p;\r\n            return cb(null, made);\r\n        }\r\n        switch (er.code) {\r\n            case 'ENOENT':\r\n                mkdirP(path.dirname(p), mode, function (er, made) {\r\n                    if (er) cb(er, made);\r\n                    else mkdirP(p, mode, cb, made);\r\n                });\r\n                break;\r\n\r\n            // In the case of any other error, just see if there's a dir\r\n            // there already.  If so, then hooray!  If not, then something\r\n            // is borked.\r\n            default:\r\n                fs.stat(p, function (er2, stat) {\r\n                    // if the stat fails, then that's super weird.\r\n                    // let the original error be the failure reason.\r\n                    if (er2 || !stat.isDirectory()) cb(er, made)\r\n                    else cb(null, made);\r\n                });\r\n                break;\r\n        }\r\n    });\r\n}\r\n\r\nmkdirP.sync = function sync (p, mode, made) {\r\n    var path = nodeRequire('path');\r\n    var fs = nodeRequire('fs');\r\n    if (mode === undefined) {\r\n        mode = 0x1FF & (~process.umask());\r\n    }\r\n    if (!made) made = null;\r\n\r\n    if (typeof mode === 'string') mode = parseInt(mode, 8);\r\n    p = path.resolve(p);\r\n\r\n    try {\r\n        fs.mkdirSync(p, mode);\r\n        made = made || p;\r\n    }\r\n    catch (err0) {\r\n        switch (err0.code) {\r\n            case 'ENOENT' :\r\n                made = sync(path.dirname(p), mode, made);\r\n                sync(p, mode, made);\r\n                break;\r\n\r\n            // In the case of any other error, just see if there's a dir\r\n            // there already.  If so, then hooray!  If not, then something\r\n            // is borked.\r\n            default:\r\n                var stat;\r\n                try {\r\n                    stat = fs.statSync(p);\r\n                }\r\n                catch (err1) {\r\n                    throw err0;\r\n                }\r\n                if (!stat.isDirectory()) throw err0;\r\n                break;\r\n        }\r\n    }\r\n\r\n    return made;\r\n};\r\n\r\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\r\n",
    "/*\r\n * react-panels\r\n * https://github.com/Theadd/react-panels\r\n *\r\n * Copyright (c) 2015 R.Beltran https://github.com/Theadd\r\n * Licensed under the MIT license.\r\n */\r\n\r\nvar React = require('react/addons');\r\n\r\n\r\nvar flexbox2Skin = function (skin) {\r\n  switch (skin || \"\") {\r\n    default:\r\n      return {\r\n        tabColor: \"#b0b0b0\",\r\n        tabIconColor: \"#b0b0b0\",\r\n        activeTabColor: \"#daaf64\",\r\n        tabTextShadow: \"#000000\",\r\n        activeTabTextShadow: \"#000000\",\r\n        titleTextShadow: \"#a6a6a6\",\r\n        iconTextShadow: \"#000000\",\r\n        iconColor: \"#daaf64\",\r\n        titleColor: \"#daaf64\",\r\n        buttonBackgroundColor: \"rgba(104, 226, 207, 0.15)\",\r\n        hoverButtonBackgroundColor: \"rgba(104, 226, 207, 0.3)\",\r\n        activeButtonBackgroundColor: \"rgba(131, 247, 220, 0.33)\",\r\n        buttonColor: \"#eaeaea\",\r\n        hoverButtonColor: \"#ffffff\",\r\n        activeButtonColor: \"#daaf64\",\r\n        buttonTextShadow: \"#7F7F7F\",\r\n        highlightedButtonBoxShadow: \"rgba(255, 255, 255, 0.6)\",\r\n        tabBackgroundColor: \"rgba(104, 226, 207, 0.15)\",\r\n        activeTabBackgroundColor: \"rgba(131, 247, 220, 0.33)\",\r\n        hoverTabBackgroundColor: \"rgba(104, 226, 207, 0.3)\",\r\n        toolbarBackgroundColor: \"rgba(171, 255, 220, 0.2)\",\r\n        contentBackgroundColor: \"rgba(171, 255, 220, 0.34)\",\r\n        footerBackgroundColor: \"rgba(171, 255, 220, 0.2)\",\r\n        borderColor: \"#000000\"\r\n      };\r\n  }\r\n}\r\n\r\nvar flexbox2Style = function (_opts, skin) {\r\n  var colors,\r\n    opts = React.addons.update({\r\n      skin: \"default\",\r\n      renderPanelBorder: true,\r\n      activeTabHeaderBorder: true\r\n    }, {$merge: _opts});\r\n\r\n  skin = skin || opts.skin;\r\n\r\n  if (typeof skin === \"object\") {\r\n    colors = React.addons.update(flexbox2Skin(), {$merge: skin});\r\n  } else {\r\n    colors = flexbox2Skin(skin);\r\n  }\r\n\r\n  return {\r\n    PanelWrapper: {\r\n      config: {\r\n        autocompact: false\r\n      }\r\n    },\r\n    Panel: {\r\n      style: {\r\n        borderTop: (opts.renderPanelBorder) ? \"1px solid \" + colors.borderColor : \"0 none\",\r\n        borderRight: (opts.renderPanelBorder) ? \"1px solid \" + colors.borderColor : \"0 none\"\r\n      },\r\n      header: {\r\n        style: {\r\n          backgroundColor: \"transparent\",\r\n          display: \"flex\",\r\n          minWidth: \"100%\",\r\n          marginBottom: \"-2px\"\r\n        }\r\n      },\r\n      tabsStart: {\r\n        style: {\r\n          width: 0\r\n        }\r\n      },\r\n      tabsEnd: {\r\n        style: {\r\n          width: 0\r\n        }\r\n      },\r\n      tabs: {\r\n        style: {\r\n          float: \"none\",\r\n          flex: 1,\r\n          display: \"flex\",\r\n          overflow: \"hidden\"\r\n        }\r\n      },\r\n      icon: {\r\n        style: {\r\n          color: colors.iconColor,\r\n          textShadow: \"2px 2px 2px \" + colors.iconTextShadow,\r\n          float: \"left\"\r\n        }\r\n      },\r\n      box: {\r\n        style: {\r\n          float: \"left\"\r\n        }\r\n      },\r\n      title: {\r\n        style: {\r\n          color: colors.titleColor,\r\n          textShadow: \"1px 1px 1px \" + colors.titleTextShadow\r\n        }\r\n      },\r\n      group: {\r\n        style: {\r\n          padding: 0,\r\n          display: \"inline-block\",\r\n          height: \"100%\",\r\n          margin: 0\r\n        }\r\n      },\r\n      body: {\r\n        style: {\r\n          borderLeft: (opts.renderPanelBorder) ? \"1px solid \" + colors.borderColor : \"0 none\",\r\n          height: \"calc(100% - \" + Utils.pixelsOf(opts.headerHeight - 2) + \")\"\r\n        }\r\n      }\r\n    },\r\n    TabButton: {\r\n      style: {\r\n        borderBottom: \"1px solid \" +  colors.borderColor,\r\n        borderRight: \"1px solid \" + colors.borderColor,\r\n        backgroundColor: colors.tabBackgroundColor,\r\n        height: opts.headerHeight - 1,\r\n        margin: \"0\",\r\n        position: \"inherit\",\r\n        float: \"none\",\r\n        overflow: \"hidden\",\r\n        flex: \"1 0 0px\",\r\n        opacity: 1\r\n      },\r\n      state: {\r\n        hover: {\r\n          style: {\r\n            backgroundColor: colors.hoverTabBackgroundColor\r\n          }\r\n        }\r\n      },\r\n      mods: {\r\n        active: {\r\n          style: {\r\n            borderBottom: \"1px solid \" + (opts.activeTabHeaderBorder ? colors.borderColor : colors.activeTabBackgroundColor),\r\n            backgroundColor: colors.activeTabBackgroundColor\r\n          },\r\n          state: {\r\n            hover: {\r\n              style: {\r\n                borderBottom: \"1px solid \" + (opts.activeTabHeaderBorder ? colors.borderColor : colors.activeTabBackgroundColor),\r\n                backgroundColor: colors.activeTabBackgroundColor\r\n              },\r\n              icon: {\r\n                style: {\r\n                  color: colors.activeTabColor,\r\n                  textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n                }\r\n              },\r\n              title: {\r\n                style: {\r\n                  color: colors.activeTabColor,\r\n                  textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n                }\r\n              }\r\n            }\r\n          },\r\n          icon: {\r\n            style: {\r\n              color: colors.activeTabColor,\r\n              textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n            }\r\n          },\r\n          title: {\r\n            style: {\r\n              color: colors.activeTabColor,\r\n              textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n            }\r\n          }\r\n        },\r\n        last: {\r\n          style: {\r\n            borderRight: \"0 none\"\r\n          }\r\n        }\r\n      },\r\n      icon: {\r\n        style: {\r\n          color: colors.tabIconColor,\r\n          textShadow: \"1px 1px 1px \" + colors.tabTextShadow,\r\n          opacity: 1\r\n        }\r\n      },\r\n      title: {\r\n        style: {\r\n          color: colors.tabColor,\r\n          textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n        }\r\n      },\r\n      box: {\r\n        style: {\r\n          marginRight: 0,\r\n          maxWidth: \"calc(100% - \" + Utils.pixelsOf(opts.headerHeight) + \")\",\r\n          opacity: 1\r\n        }\r\n      }\r\n    },\r\n    Tab: {\r\n      toolbar: {\r\n        style: {\r\n          minHeight: 0,\r\n          lineHeight: \"inherit\",\r\n          padding: \"0\",\r\n          display: \"block\",\r\n          position: \"relative\",\r\n          marginTop: \"1px\"\r\n        },\r\n        children: {\r\n          style: {\r\n            padding: \"10px\",\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n            position: \"relative\",\r\n            backgroundColor: colors.toolbarBackgroundColor\r\n          }\r\n        }\r\n      },\r\n      content: {\r\n        style: {\r\n          backgroundColor: colors.contentBackgroundColor,\r\n          boxShadow: \"0px 0px 29px rgba(0, 0, 0, 0.7) inset\",\r\n          borderTop: \"1px solid \" +  colors.borderColor\r\n        }\r\n      },\r\n      footer: {\r\n        style: {\r\n          backgroundColor: colors.footerBackgroundColor,\r\n          borderTop: \"1px solid \" +  colors.borderColor\r\n        }\r\n      }\r\n    },\r\n    Button: {\r\n      style: {\r\n        height: Utils.pixelsOf(opts.headerHeight - 1),\r\n        backgroundColor: colors.buttonBackgroundColor,\r\n        borderBottom: \"1px solid \" +  colors.borderColor,\r\n        borderLeft: \"1px solid \" +  colors.borderColor\r\n      },\r\n      children: {\r\n        style: {\r\n          color: colors.buttonColor,\r\n          textShadow: \"1px 1px 1px \" + colors.buttonTextShadow\r\n        }\r\n      },\r\n      state: {\r\n        hover: {\r\n          style: {\r\n            backgroundColor: colors.hoverButtonBackgroundColor\r\n          },\r\n          children: {\r\n            style: {\r\n              color: colors.hoverButtonColor\r\n            }\r\n          }\r\n        }\r\n      },\r\n      mods: {\r\n        active: {\r\n          style: {\r\n            backgroundColor: colors.activeButtonBackgroundColor\r\n          },\r\n          children: {\r\n            style: {\r\n              color: colors.activeButtonColor\r\n            }\r\n          }\r\n        },\r\n        highlighted: {\r\n          style: {\r\n            boxShadow: \"0 0 9px \" + colors.highlightedButtonBoxShadow + \" inset\"\r\n          }\r\n        },\r\n        disabled: {\r\n          style: {\r\n            pointerEvents: \"none\",\r\n            opacity: 0.5\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\n\r\nvar flexboxStyle = function (opts, skin) {\r\n  var colors;\r\n  skin = skin || opts.skin;\r\n\r\n  switch (skin) {\r\n    case \"fiery\":\r\n      colors = {\r\n        tabColor: \"#b0b0b0\",\r\n        tabIconColor: \"#616161\",\r\n        activeTabColor: \"#f72121\",\r\n        tabTextShadow: \"#000000\",\r\n        activeTabTextShadow: \"#000000\",\r\n        titleTextShadow: \"#a6a6a6\",\r\n        iconTextShadow: \"#000000\",\r\n        iconColor: \"#ffffff\",\r\n        titleColor: \"#ffffff\",\r\n        buttonBackgroundColor: \"#202020\",\r\n        hoverButtonBackgroundColor: \"#342828\",\r\n        activeButtonBackgroundColor: \"#4d2c2c\",\r\n        buttonColor: \"#eaeaea\",\r\n        hoverButtonColor: \"#ffffff\",\r\n        activeButtonColor: \"#f72121\",\r\n        buttonTextShadow: \"#7F7F7F\",\r\n        tabBackgroundColor: \"#202020\",\r\n        activeTabBackgroundColor: \"#2e2e2e\",\r\n        hoverTabBackgroundColor: \"#342828\",\r\n        toolbarBackgroundColor: \"#4d2c2c\",\r\n        contentBackgroundColor: \"#3e3e3e\",\r\n        footerBackgroundColor: \"#4e4e4e\"\r\n      };\r\n      break;\r\n\r\n    default:\r\n      colors = {\r\n        tabColor: \"#b0b0b0\",\r\n        tabIconColor: \"#616161\",\r\n        activeTabColor: \"#ffffff\",\r\n        tabTextShadow: \"#000000\",\r\n        activeTabTextShadow: \"#7F7F7F\",\r\n        titleTextShadow: \"#a6a6a6\",\r\n        iconTextShadow: \"#a6a6a6\",\r\n        iconColor: \"#ffffff\",\r\n        titleColor: \"#ffffff\",\r\n        buttonBackgroundColor: \"#202020\",\r\n        hoverButtonBackgroundColor: \"#2a2a2a\",\r\n        activeButtonBackgroundColor: \"#4e4e4e\",\r\n        buttonColor: \"#eaeaea\",\r\n        hoverButtonColor: \"#ffffff\",\r\n        activeButtonColor: \"#ffffff\",\r\n        buttonTextShadow: \"#7F7F7F\",\r\n        tabBackgroundColor: \"#202020\",\r\n        activeTabBackgroundColor: \"#2e2e2e\",\r\n        hoverTabBackgroundColor: \"#2a2a2a\",\r\n        toolbarBackgroundColor: \"#4e4e4e\",\r\n        contentBackgroundColor: \"#3e3e3e\",\r\n        footerBackgroundColor: \"#4e4e4e\"\r\n      };\r\n      break;\r\n  }\r\n\r\n  return {\r\n    PanelWrapper: {\r\n      config: {\r\n        autocompact: false\r\n      }\r\n    },\r\n    Panel: {\r\n      style: {\r\n        backgroundColor: \"black\",\r\n        padding: \"1px 1px 0 0\"\r\n      },\r\n      header: {\r\n        style: {\r\n          backgroundColor: \"transparent\",\r\n          display: \"flex\",\r\n          minWidth: \"100%\"\r\n        }\r\n      },\r\n      tabsStart: {\r\n        style: {\r\n          width: 0\r\n        }\r\n      },\r\n      tabsEnd: {\r\n        style: {\r\n          width: 0\r\n        }\r\n      },\r\n      tabs: {\r\n        style: {\r\n          float: \"none\",\r\n          flex: 1,\r\n          display: \"flex\",\r\n          overflow: \"hidden\"\r\n        }\r\n      },\r\n      icon: {\r\n        style: {\r\n          color: colors.iconColor,\r\n          textShadow: \"2px 2px 2px \" + colors.iconTextShadow,\r\n          float: \"left\"\r\n        }\r\n      },\r\n      box: {\r\n        style: {\r\n          float: \"left\"\r\n        }\r\n      },\r\n      title: {\r\n        style: {\r\n          color: colors.titleColor,\r\n          textShadow: \"1px 1px 1px \" + colors.titleTextShadow\r\n        }\r\n      },\r\n      group: {\r\n        style: {\r\n          padding: 0,\r\n          display: \"inline-block\",\r\n          height: \"100%\",\r\n          margin: 0\r\n        }\r\n      },\r\n      body: {\r\n        style: {\r\n          marginLeft: \"1px\"\r\n        }\r\n      }\r\n    },\r\n    TabButton: {\r\n      style: {\r\n        backgroundColor: colors.tabBackgroundColor,\r\n        height: opts.headerHeight - 1,\r\n        margin: \"0 0 1px 1px\",\r\n        position: \"inherit\",\r\n        float: \"none\",\r\n        overflow: \"hidden\",\r\n        flex: \"1 0 0px\"\r\n      },\r\n      state: {\r\n        hover: {\r\n          style: {\r\n            backgroundColor: colors.hoverTabBackgroundColor\r\n          }\r\n        }\r\n      },\r\n      mods: {\r\n        active: {\r\n          style: {\r\n            backgroundColor: colors.activeTabBackgroundColor\r\n          },\r\n          state: {\r\n            hover: {\r\n              style: {\r\n                backgroundColor: colors.activeTabBackgroundColor\r\n              },\r\n              icon: {\r\n                style: {\r\n                  color: colors.activeTabColor,\r\n                  textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n                }\r\n              },\r\n              title: {\r\n                style: {\r\n                  color: colors.activeTabColor,\r\n                  textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n                }\r\n              }\r\n            }\r\n          },\r\n          icon: {\r\n            style: {\r\n              color: colors.activeTabColor,\r\n              textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n            }\r\n          },\r\n          title: {\r\n            style: {\r\n              color: colors.activeTabColor,\r\n              textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n            }\r\n          }\r\n        }\r\n      },\r\n      icon: {\r\n        style: {\r\n          color: colors.tabIconColor,\r\n          textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n        }\r\n      },\r\n      title: {\r\n        style: {\r\n          color: colors.tabColor,\r\n          textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n        }\r\n      },\r\n      box: {\r\n        style: {\r\n          marginRight: 0,\r\n          maxWidth: \"calc(100% - \" + Utils.pixelsOf(opts.headerHeight) + \")\"\r\n        }\r\n      }\r\n    },\r\n    Tab: {\r\n      toolbar: {\r\n        style: {\r\n          minHeight: 0,\r\n          lineHeight: \"inherit\",\r\n          padding: \"0\",\r\n          display: \"block\",\r\n          position: \"relative\",\r\n          top: \"-1px\"\r\n        },\r\n        children: {\r\n          style: {\r\n            padding: \"10px\",\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n            position: \"relative\",\r\n            marginTop: \"1px\",\r\n            backgroundColor: colors.toolbarBackgroundColor\r\n          }\r\n        }\r\n      },\r\n      content: {\r\n        style: {\r\n          backgroundColor: colors.contentBackgroundColor,\r\n          marginBottom: \"1px\"\r\n        }\r\n      },\r\n      footer: {\r\n        style: {\r\n          backgroundColor: colors.footerBackgroundColor,\r\n          marginBottom: \"1px\"\r\n        }\r\n      }\r\n    },\r\n    Button: {\r\n      style: {\r\n        height: Utils.pixelsOf(opts.headerHeight - 1),\r\n        backgroundColor: colors.buttonBackgroundColor,\r\n        marginLeft: \"1px\"\r\n      },\r\n      children: {\r\n        style: {\r\n          color: colors.buttonColor,\r\n          textShadow: \"1px 1px 1px \" + colors.buttonTextShadow\r\n        }\r\n      },\r\n      state: {\r\n        hover: {\r\n          style: {\r\n            backgroundColor: colors.hoverButtonBackgroundColor\r\n          },\r\n          children: {\r\n            style: {\r\n              color: colors.hoverButtonColor\r\n            }\r\n          }\r\n        }\r\n      },\r\n      mods: {\r\n        active: {\r\n          style: {\r\n            backgroundColor: colors.activeButtonBackgroundColor\r\n          },\r\n          children: {\r\n            style: {\r\n              color: colors.activeButtonColor\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\n\r\nvar chemicalStyle = function (opts, skin) {\r\n  var colors;\r\n  skin = skin || opts.skin;\r\n\r\n  switch (skin) {\r\n    case \"blueish\":\r\n      colors = {\r\n        tabColor: \"rgba(0, 0, 0, 0.8)\",\r\n        activeTabColor: \"rgba(0, 0, 0, 0.9)\",\r\n        tabTextShadow: \"#bbbbbb\",\r\n        activeTabTextShadow: \"#999999\",\r\n        activeTabBackgroundColor: \"rgba(102, 143, 182, 0.25)\",\r\n        activeTabBorderColor: \"rgba(0, 0, 0, 0.5)\",\r\n        titleTextShadow: \"#a6a6a6\",\r\n        iconTextShadow: \"rgba(0, 0, 0, 0.9)\",\r\n        iconColor: \"rgba(0, 0, 0, 0.8)\",\r\n        titleColor: \"rgba(0, 0, 0, 0.8)\",\r\n        toolbarBoxShadow: \"rgba(0, 0, 0, 0.1)\",\r\n        contentBackgroundColorWithToolbar: \"rgba(102, 143, 182, 0.25)\",\r\n        footerBackgroundColor: \"rgba(165, 165, 165, 0.32)\",\r\n        hoverTabBackgroundColor: \"rgba(224, 230, 240, 0.65)\",\r\n        buttonBackgroundColor: \"rgba(224, 230, 240, 0.65)\",\r\n        hoverButtonBackgroundColor: \"rgba(102, 143, 182, 0.25)\",\r\n        activeButtonBackgroundColor: \"rgba(102, 143, 182, 0.25)\"\r\n      };\r\n\r\n      break;\r\n    default:\r\n      colors = {\r\n        tabColor: \"#ffffff\",\r\n        activeTabColor: \"rgba(0, 0, 0, 0.9)\",\r\n        tabTextShadow: \"#bbbbbb\",\r\n        activeTabTextShadow: \"#999999\",\r\n        activeTabBackgroundColor: \"rgba(255, 255, 255, 0.9)\",\r\n        activeTabBorderColor: \"rgba(0, 0, 0, 0.5)\",\r\n        titleTextShadow: \"#a6a6a6\",\r\n        iconTextShadow: \"rgba(0, 0, 0, 0.9)\",\r\n        iconColor: \"#ffffff\",\r\n        titleColor: \"#ffffff\",\r\n        toolbarBoxShadow: \"rgba(0, 0, 0, 0.1)\",\r\n        contentBackgroundColorWithToolbar: \"rgba(255, 255, 255, 0.85)\",\r\n        footerBackgroundColor: \"rgba(224, 230, 240, 0.8)\",\r\n        hoverTabBackgroundColor: \"rgba(224, 230, 240, 0.65)\",\r\n        buttonBackgroundColor: \"rgba(255, 255, 255, 0.2)\",\r\n        hoverButtonBackgroundColor: \"rgba(255, 255, 255, 0.9)\",\r\n        activeButtonBackgroundColor: \"rgba(255, 255, 255, 0.9)\"\r\n      };\r\n      break;\r\n  }\r\n\r\n  return {\r\n    Panel: {\r\n      header: {\r\n        style: {\r\n          backgroundColor: \"transparent\",\r\n          paddingRight: Utils.pixelsOf(opts.headerHeight)\r\n        }\r\n      },\r\n      tabsStart: {\r\n        style: {\r\n          width: 50,\r\n          float: \"left\"\r\n        }\r\n      },\r\n      tabsEnd: {\r\n        style: {\r\n          width: 10,\r\n          float: \"right\"\r\n        }\r\n      },\r\n      tabs: {\r\n        style: {\r\n          float: \"left\"\r\n        }\r\n      },\r\n      icon: {\r\n        style: {\r\n          color: colors.iconColor,\r\n          textShadow: \"2px 2px 2px \" + colors.iconTextShadow,\r\n          float: \"left\"\r\n        }\r\n      },\r\n      box: {\r\n        style: {\r\n          float: \"left\"\r\n        }\r\n      },\r\n      title: {\r\n        style: {\r\n          color: colors.titleColor,\r\n          textShadow: \"1px 1px 1px \" + colors.titleTextShadow\r\n        }\r\n      },\r\n      body: {\r\n        style: {\r\n          backgroundColor: \"transparent\",\r\n          borderColor: \"rgba(0, 0, 0, 0.5)\"\r\n        }\r\n      }\r\n    },\r\n    TabButton: {\r\n      style: {\r\n        borderRadius: \"2px 2px 0 0\",\r\n        marginLeft: 1\r\n      },\r\n      state: {\r\n        hover: {\r\n          style: {\r\n            backgroundColor: colors.hoverTabBackgroundColor\r\n          },\r\n          icon: {\r\n            style: {\r\n              color: \"rgba(0, 0, 0, 0.9)\",\r\n              textShadow: \"1px 1px 1px #999999\"\r\n            }\r\n          },\r\n          title: {\r\n            style: {\r\n              color: \"rgba(0, 0, 0, 0.9)\",\r\n              textShadow: \"1px 1px 1px #999999\"\r\n            }\r\n          }\r\n        }\r\n      },\r\n      mods: {\r\n        active: {\r\n          style: {\r\n            borderColor: colors.activeTabBorderColor,\r\n            backgroundColor: colors.activeTabBackgroundColor\r\n          },\r\n          state: {\r\n            hover: {\r\n              style: {\r\n                backgroundColor: colors.activeTabBackgroundColor\r\n              },\r\n              icon: {\r\n                style: {\r\n                  color: colors.activeTabColor,\r\n                  textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n                }\r\n              },\r\n              title: {\r\n                style: {\r\n                  color: colors.activeTabColor,\r\n                  textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n                }\r\n              }\r\n            }\r\n          },\r\n          icon: {\r\n            style: {\r\n              color: colors.activeTabColor,\r\n              textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n            }\r\n          },\r\n          title: {\r\n            style: {\r\n              color: colors.activeTabColor,\r\n              textShadow: \"1px 1px 1px \" + colors.activeTabTextShadow\r\n            }\r\n          }\r\n        }\r\n      },\r\n      icon: {\r\n        style: {\r\n          color: colors.tabColor,\r\n          textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n        }\r\n      },\r\n      title: {\r\n        style: {\r\n          color: colors.tabColor,\r\n          textShadow: \"1px 1px 1px \" + colors.tabTextShadow\r\n        }\r\n      }\r\n    },\r\n    Tab: {\r\n      mods: {\r\n        withToolbar: {\r\n          content: {\r\n            style: {\r\n              backgroundColor: colors.contentBackgroundColorWithToolbar\r\n            }\r\n          }\r\n        }\r\n      },\r\n      toolbar: {\r\n        style: {\r\n          backgroundColor: colors.activeTabBackgroundColor,\r\n          borderBottom: \"0 none\",\r\n          marginBottom: \"1px\",\r\n          borderRadius: \"2px\",\r\n          boxShadow: \"0 -2px 0 \" + colors.toolbarBoxShadow + \" inset\"\r\n        }\r\n      },\r\n      content: {\r\n        style: {\r\n          backgroundColor: colors.activeTabBackgroundColor,\r\n          borderBottom: \"0 none\",\r\n          marginBottom: \"1px\",\r\n          borderRadius: \"2px\"\r\n        }\r\n      },\r\n      footer: {\r\n        style: {\r\n          backgroundColor: colors.footerBackgroundColor,\r\n          borderRadius: \"2px\"\r\n        }\r\n      }\r\n    },\r\n    Button: {\r\n      style: {\r\n        borderRadius: \"2px 2px 0 0\",\r\n        backgroundColor: colors.buttonBackgroundColor,\r\n        marginLeft: \"1px\"\r\n      },\r\n      state: {\r\n        hover: {\r\n          style: {\r\n            backgroundColor: colors.hoverButtonBackgroundColor\r\n          },\r\n          children: {\r\n            style: {\r\n              color: \"rgba(0, 0, 0, 0.9)\",\r\n              textShadow: \"1px 1px 1px #ffffff\"\r\n            }\r\n          }\r\n        }\r\n      },\r\n      mods: {\r\n        active: {\r\n          style: {\r\n            backgroundColor: colors.activeButtonBackgroundColor\r\n          }\r\n        }\r\n      },\r\n      children: {\r\n        style: {\r\n          color: \"#ffffff\",\r\n          textShadow: \"1px 1px 1px rgba(0, 0, 0, 0.9)\"\r\n        }\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\n\r\nvar buildStyle = function (opts) {\r\n  opts = opts || {};\r\n  opts = {\r\n    theme: opts.theme || \"base\",\r\n    skin: opts.skin || \"default\",\r\n    headerHeight: opts.headerHeight || 32,\r\n    headerFontSize: opts.headerFontSize || 14,\r\n    borderRadius: opts.borderRadius || 3,\r\n    maxTitleWidth: opts.maxTitleWidth || 130,\r\n    useAvailableHeight: opts.useAvailableHeight || false,\r\n    renderPanelBorder: (typeof opts.renderPanelBorder === \"boolean\") ? opts.renderPanelBorder : true,\r\n    activeTabHeaderBorder: (typeof opts.activeTabHeaderBorder === \"boolean\") ? opts.activeTabHeaderBorder : true\r\n  };\r\n\r\n  var styles = {\r\n    base: {\r\n      PanelWrapper: {\r\n        style: {},\r\n        config: {\r\n          autocompact: true\r\n        }\r\n      },\r\n      Panel: {\r\n        style: {\r\n          height: (opts.useAvailableHeight) ? \"100%\" : \"inherit\"\r\n        },\r\n        header: {\r\n          style: {\r\n            display: \"block\",\r\n            fontSize: Utils.pixelsOf(opts.headerFontSize),\r\n            height: opts.headerHeight\r\n          }\r\n        },\r\n        tabsStart: {\r\n          style: {\r\n            width: 20,\r\n            height: \"100%\"\r\n          }\r\n        },\r\n        tabsEnd: {\r\n          style: {\r\n            width: 20,\r\n            height: \"100%\"\r\n          }\r\n        },\r\n        tabs: {\r\n          style: {\r\n            height: opts.headerHeight,\r\n            float: \"right\",\r\n            display: \"inline-block\",\r\n            margin: 0,\r\n            minWidth: Utils.pixelsOf(opts.headerHeight),\r\n            padding: 0\r\n          }\r\n        },\r\n        icon: {\r\n          style: {\r\n            display: \"block\",\r\n            float: \"left\",\r\n            fontSize: \"125%\",\r\n            height: opts.headerHeight,\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight - 4),\r\n            marginRight: -6,\r\n            textAlign: \"center\",\r\n            width: opts.headerHeight - 2\r\n          }\r\n        },\r\n        box: {\r\n          style: {\r\n            marginLeft: 10,\r\n            height: \"100%\",\r\n            display: \"inline-block\",\r\n            position: \"relative\",\r\n            maxWidth: Utils.pixelsOf(opts.maxTitleWidth)\r\n          }\r\n        },\r\n        title: {\r\n          style: {\r\n            overflow: \"hidden\",\r\n            textOverflow: \"ellipsis\",\r\n            whiteSpace: \"nowrap\",\r\n            letterSpacing: 0,\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n            width: \"auto\"\r\n          }\r\n        },\r\n        group: {\r\n          style: {\r\n            padding: \"0 5px\",\r\n            backgroundColor: \"transparent\"\r\n          }\r\n        },\r\n        body: {\r\n          style: {\r\n            height: (opts.useAvailableHeight) ? \"calc(100% - \" + opts.headerHeight + \"px)\" : \"inherit\"\r\n          }\r\n        }\r\n      },\r\n      TabButton: {\r\n        style: {\r\n          position: \"relative\",\r\n          float: \"left\",\r\n          display: \"block\",\r\n          listStyle: \"none\",\r\n          padding: \"0 5px\",\r\n          height: opts.headerHeight,\r\n          fontSize: \"0.95em\",\r\n          cursor: \"pointer\"\r\n        },\r\n        mods: {\r\n          untitled: {\r\n            box: {\r\n              style: {\r\n                marginLeft: 0\r\n              }\r\n            }\r\n          },\r\n          active: {\r\n            style: {\r\n              cursor: \"default\"\r\n            }\r\n          }\r\n        },\r\n        icon: {\r\n          style: {\r\n            display: \"block\",\r\n            float: \"left\",\r\n            fontSize: \"125%\",\r\n            height: opts.headerHeight,\r\n            textAlign: \"center\",\r\n            width: opts.headerHeight - 2,\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight - 2),\r\n            marginRight: -9,\r\n            marginLeft: -3,\r\n            opacity: 0.85\r\n          }\r\n        },\r\n        box: {\r\n          style: {\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n            marginRight: 6,\r\n            opacity: 0.85,\r\n            marginLeft: 10,\r\n            height: \"100%\",\r\n            display: \"inline-block\",\r\n            position: \"relative\",\r\n            maxWidth: Utils.pixelsOf(opts.maxTitleWidth)\r\n          }\r\n        },\r\n        title: {\r\n          style: {\r\n            overflow: \"hidden\",\r\n            textOverflow: \"ellipsis\",\r\n            whiteSpace: \"nowrap\",\r\n            letterSpacing: 0,\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n            width: \"auto\"\r\n          }\r\n        }\r\n      },\r\n      Tab: {\r\n        style: {\r\n          display: \"none\"\r\n        },\r\n        mods: {\r\n          active: {\r\n            style: {\r\n              display: (opts.useAvailableHeight) ? \"flex\" : \"block\",\r\n              minHeight: (opts.useAvailableHeight) ? \"100%\" : \"inherit\",\r\n              flexDirection: (opts.useAvailableHeight) ? \"column\" : \"inherit\",\r\n              height: \"100%\"\r\n            },\r\n            content: {\r\n              style: (opts.useAvailableHeight) ? {\r\n                flex: 1,\r\n                position: \"relative\"\r\n              } : {},\r\n              children: {\r\n                style: (opts.useAvailableHeight) ? {\r\n                  padding: \"10px\",\r\n                  position: \"absolute\",\r\n                  height: \"100%\",\r\n                  width: \"100%\"\r\n                } : { }\r\n              }\r\n            }\r\n          },\r\n          withToolbar: {\r\n            toolbar: {\r\n              style: { }\r\n            }\r\n          }\r\n        },\r\n        toolbar: {\r\n          style: {\r\n            minHeight: Utils.pixelsOf(opts.headerHeight),\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight)\r\n          },\r\n          children: {\r\n            style: {\r\n              padding: \"10px\"\r\n            }\r\n          }\r\n        },\r\n        content: {\r\n          style: { },\r\n          children: {\r\n            style: {\r\n              padding: \"10px\"\r\n            }\r\n          }\r\n        },\r\n        footer: {\r\n          style: {\r\n            minHeight: Utils.pixelsOf(opts.headerHeight),\r\n            lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n            padding: \"10px\"\r\n          },\r\n          children: {\r\n            style: {}\r\n          }\r\n        }\r\n      },\r\n      Button: {\r\n        style: {\r\n          float: \"right\",\r\n          height: Utils.pixelsOf(opts.headerHeight),\r\n          minWidth: Utils.pixelsOf(opts.headerHeight),\r\n          display: \"inline-block\",\r\n          lineHeight: Utils.pixelsOf(opts.headerHeight),\r\n          margin: 0,\r\n          padding: 0,\r\n          textAlign: \"center\",\r\n          cursor: \"pointer\",\r\n          WebkitUserSelect: \"none\",\r\n          MozUserSelect: \"none\",\r\n          msUserSelect: \"none\",\r\n          userSelect: \"none\"\r\n        },\r\n        mods: {\r\n          disabled: {\r\n            style: {\r\n              cursor: \"default\",\r\n              pointerEvents: \"none\",\r\n              opacity: 0.5\r\n            }\r\n          },\r\n          hidden: {\r\n            style: {\r\n              display: \"none\"\r\n            }\r\n          },\r\n          highlighted: {\r\n            style: {}\r\n          }\r\n        },\r\n        children: {\r\n          style: {}\r\n        }\r\n      }\r\n    },\r\n    /* THEME: Chemical */\r\n    chemical: chemicalStyle,\r\n    flexbox: flexboxStyle,\r\n    flexbox2: flexbox2Style\r\n  };\r\n\r\n  var theme = (opts.theme != \"base\") ? styles[opts.theme](opts) : {};\r\n\r\n  return Utils.merge(styles.base, theme);\r\n};\r\n\r\nvar createSheet = (function (opts) {\r\n  var _sheet = buildStyle(opts),\r\n    _skin = {};\r\n\r\n  return function (target, mods, alter) {\r\n    var using = _sheet;\r\n\r\n    mods = mods || [];\r\n    alter = alter || {}\r\n    if (alter.skin || false) {\r\n      if (!(_skin[alter.skin] || false)) {\r\n        _skin[alter.skin] = buildStyle(React.addons.update(opts, {$merge: {skin: alter.skin}}));\r\n      }\r\n      using = _skin[alter.skin];\r\n    }\r\n    if (!mods.length) return using[target];\r\n    var sheet = React.addons.update(using[target], {$merge: {}}),\r\n      i;\r\n    for (i = 0; i < mods.length; ++i) {\r\n      if ((sheet.mods || false) && (sheet.mods[mods[i]] || false)) {\r\n        sheet = Utils.merge(sheet, sheet.mods[mods[i]]);\r\n      }\r\n    }\r\n    return sheet;\r\n  }\r\n});\r\n\r\n\r\nvar Utils = {\r\n  pixelsOf: function (value) {\r\n    var val = parseInt(value) || 0\r\n    return (val) ? String(val) + \"px\" : \"0\";\r\n  },\r\n  /* Copyright (c) 2012 Nicholas Fisher (MIT License) https://github.com/KyleAMathews/deepmerge */\r\n  merge: function (target, src) {\r\n    var array = Array.isArray(src);\r\n    var dst = array && [] || {};\r\n\r\n    if (array) {\r\n      target = target || [];\r\n      dst = dst.concat(target);\r\n      src.forEach(function(e, i) {\r\n        if (typeof dst[i] === 'undefined') {\r\n          dst[i] = e;\r\n        } else if (typeof e === 'object') {\r\n          dst[i] = Utils.merge(target[i], e);\r\n        } else {\r\n          if (target.indexOf(e) === -1) {\r\n            dst.push(e);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      if (target && typeof target === 'object') {\r\n        Object.keys(target).forEach(function (key) {\r\n          dst[key] = target[key];\r\n        })\r\n      }\r\n      Object.keys(src).forEach(function (key) {\r\n        if (typeof src[key] !== 'object' || !src[key]) {\r\n          dst[key] = src[key];\r\n        }\r\n        else {\r\n          if (!target[key]) {\r\n            dst[key] = src[key];\r\n          } else {\r\n            dst[key] = Utils.merge(target[key], src[key]);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    return dst;\r\n  }\r\n};\r\n\r\nvar ReactCSSTransitionGroup = React.addons.CSSTransitionGroup;\r\n\r\n\r\nvar Mixins = {\r\n  Styleable: {\r\n    getInitialState: function () {\r\n      this.__ssv = {};\r\n      this.__ssvh = false;\r\n      this.__ssa = {target: '', mods: [], alter: {}};\r\n      return {};\r\n    },\r\n    contextTypes: {\r\n      sheet: React.PropTypes.func\r\n    },\r\n    getSheet: function (target, mods, alter) {\r\n      var rebuild = false, i;\r\n\r\n      mods = (typeof this['getSheetMods'] === \"function\") ? this['getSheetMods'](mods || []) : mods || [];\r\n      alter = alter || {}\r\n      if (target != this.__ssa.target) rebuild = true;\r\n      else {\r\n        if (mods.length != this.__ssa.mods.length) rebuild = true;\r\n        else if (mods.length != 0) {\r\n          for (i = mods.length; --i >= 0;) {\r\n            if (this.__ssa.mods.indexOf(mods[i]) == -1) {\r\n              rebuild = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        // TODO: check if alter has changed\r\n      }\r\n\r\n      if (rebuild) {\r\n        this.__ssv = this.context.sheet(target, mods, alter);\r\n        this.__ssvh = false;\r\n        this.__ssa = {\r\n          target: target,\r\n          mods: Utils.merge(mods, []),\r\n          alter: Utils.merge(alter, {})\r\n        };\r\n      }\r\n      if ((typeof this.state._hover === \"boolean\")) {\r\n        if (this.state._hover) {\r\n          if (this.__ssvh || false) {\r\n            return this.__ssvh;\r\n          }\r\n          if ((this.__ssv.state || false) && (this.__ssv.state.hover || false)) {\r\n            this.__ssvh = Utils.merge(this.__ssv, this.__ssv.state.hover);\r\n            return this.__ssvh;\r\n          }\r\n        }\r\n      }\r\n\r\n      return this.__ssv;\r\n    }\r\n  },\r\n  Transitions: {\r\n    propTypes: {\r\n      transitionName: React.PropTypes.string,\r\n      transitionEnter: React.PropTypes.bool,\r\n      transitionLeave: React.PropTypes.bool,\r\n      transitionAppear: React.PropTypes.bool\r\n    },\r\n    getTransitionProps: function (pcType) {\r\n      pcType = pcType || this.props.panelComponentType;\r\n\r\n      var props = {},\r\n        globals = (this.context && this.context.globals && this.context.globals[pcType]) ?\r\n          this.context.globals[pcType] : {},\r\n        transitionName = (typeof this.props.transitionName === \"string\") ?\r\n          this.props.transitionName : globals.transitionName || \"\";\r\n      if (transitionName.length) {\r\n        props = {\r\n          transitionName: transitionName,\r\n          transitionEnter: (typeof this.props.transitionEnter === \"boolean\") ?\r\n            this.props.transitionEnter : globals.transitionEnter || false,\r\n          transitionLeave: (typeof this.props.transitionLeave === \"boolean\") ?\r\n            this.props.transitionLeave : globals.transitionLeave || false,\r\n          transitionAppear: (typeof this.props.transitionAppear === \"boolean\") ?\r\n            this.props.transitionAppear : globals.transitionAppear || false\r\n        };\r\n      } else {\r\n        props = {\r\n          transitionName: \"none\",\r\n          transitionEnter: false,\r\n          transitionLeave: false,\r\n          transitionAppear: false\r\n        };\r\n      }\r\n      return props;\r\n    }\r\n  },\r\n  Toolbar: {\r\n    getDefaultProps: function () {\r\n      return {\r\n        panelComponentType: \"Toolbar\"\r\n      };\r\n    }\r\n  },\r\n  Content: {\r\n    getDefaultProps: function () {\r\n      return {\r\n        panelComponentType: \"Content\"\r\n      };\r\n    }\r\n  },\r\n  Footer: {\r\n    getDefaultProps: function () {\r\n      return {\r\n        panelComponentType: \"Footer\"\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nMixins.StyleableWithEvents = {\r\n  mixins: [Mixins.Styleable],\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      onMouseEnter: false,\r\n      onMouseLeave: false\r\n    };\r\n  },\r\n\r\n  getInitialState: function () {\r\n    this.listeners = {\r\n      onMouseEnter: this.handleMouseEnter,\r\n      onMouseLeave: this.handleMouseLeave\r\n    };\r\n    return {\r\n      _hover: false,\r\n      _focus: false\r\n    };\r\n  },\r\n\r\n  handleMouseEnter: function (ev) {\r\n    if (typeof this.props['onMouseEnter'] === \"function\") this.props['onMouseEnter'](ev);\r\n\r\n    this.setState({\r\n      _hover: true\r\n    });\r\n  },\r\n\r\n  handleMouseLeave: function (ev) {\r\n    if (typeof this.props['onMouseLeave'] === \"function\") this.props['onMouseLeave'](ev);\r\n\r\n    this.setState({\r\n      _hover: false\r\n    });\r\n  }\r\n\r\n};\r\n\r\nMixins.PanelWrapper = {\r\n\r\n  propTypes: {\r\n    transitionName: React.PropTypes.string,\r\n    transitionEnter: React.PropTypes.bool,\r\n    transitionLeave: React.PropTypes.bool,\r\n    transitionAppear: React.PropTypes.bool,\r\n    globals: React.PropTypes.object\r\n  },\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      \"icon\": false,\r\n      \"title\": \"\",\r\n      \"selectedIndex\": 0,\r\n      /** Triggered before a change tab event propagated from within the Panel (e.g., user's click).\r\n       *  Optionally, return false to stop it.\r\n       */\r\n      \"onTabChange\": null,\r\n      \"buttons\": [],\r\n      \"leftButtons\": [],\r\n      \"globals\": {}\r\n    };\r\n  },\r\n\r\n  getInitialState: function () {\r\n    var opts = {\r\n      theme: this.props.theme,\r\n      skin: this.props.skin,\r\n      headerHeight: this.props.headerHeight,\r\n      headerFontSize: this.props.headerFontSize,\r\n      borderRadius: this.props.borderRadius,\r\n      maxTitleWidth: this.props.maxTitleWidth,\r\n      useAvailableHeight: this.props.useAvailableHeight,\r\n      renderPanelBorder: this.props.renderPanelBorder,\r\n      activeTabHeaderBorder: this.props.activeTabHeaderBorder\r\n    };\r\n    this._sheet = createSheet(opts);\r\n    this.config = this._sheet(\"PanelWrapper\").config;\r\n\r\n    return {\r\n      selectedIndex: parseInt(this.props.selectedIndex)\r\n    };\r\n  },\r\n\r\n  childContextTypes: {\r\n    selectedIndex: React.PropTypes.number,\r\n    sheet: React.PropTypes.func,\r\n    onTabChange: React.PropTypes.func,\r\n    globals: React.PropTypes.object,\r\n    numTabs: React.PropTypes.number\r\n  },\r\n\r\n  getChildContext: function () {\r\n    return {\r\n      selectedIndex: this.state.selectedIndex,\r\n      sheet: this._sheet,\r\n      onTabChange: this.handleTabChange,\r\n      globals: this.props.globals,\r\n      numTabs: React.Children.count(this.props.children)\r\n    };\r\n  },\r\n\r\n  handleTabChange: function (index) {\r\n    if (typeof this.props.onTabChange === \"function\") {\r\n      if (this.props.onTabChange(index, this) !== false) {\r\n        this.setSelectedIndex(index);\r\n      }\r\n    } else {\r\n      this.setSelectedIndex(index);\r\n    }\r\n  },\r\n\r\n  getSelectedIndex: function () {\r\n    return this.state.selectedIndex;\r\n  },\r\n\r\n  setSelectedIndex: function (index, callback) {\r\n    this.setState({selectedIndex: parseInt(index)});\r\n    this.forceUpdate(function () {\r\n      if (typeof callback === \"function\") {\r\n        callback();\r\n      }\r\n    });\r\n  },\r\n\r\n  componentWillReceiveProps: function (nextProps) {\r\n    var sIndex = this.state.selectedIndex,\r\n      resetIndex = false,\r\n      numTabs = React.Children.count(nextProps.children);\r\n\r\n    if (nextProps.selectedIndex != this.props.selectedIndex) {\r\n      sIndex = nextProps.selectedIndex;\r\n      resetIndex = true;\r\n    }\r\n    if (sIndex >= numTabs) {\r\n      sIndex = Math.max(numTabs - 1, 0);\r\n      resetIndex = true;\r\n    }\r\n    if (resetIndex) {\r\n      this.setState({selectedIndex: parseInt(sIndex)});\r\n    }\r\n  }\r\n\r\n};\r\n\r\nMixins.TabWrapper = {\r\n  observedProps: ['selectedIndex', 'index'],\r\n\r\n  propTypes: {\r\n    tabKey: React.PropTypes.any\r\n  },\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      panelComponentType: \"TabWrapper\",\r\n      icon: \"\",\r\n      title: \"\",\r\n      pinned: false,\r\n      showToolbar: true,\r\n      showFooter: true\r\n    };\r\n  },\r\n\r\n  childContextTypes: {\r\n    index: React.PropTypes.number,\r\n    tabKey: React.PropTypes.any\r\n  },\r\n\r\n  getChildContext: function () {\r\n    return {\r\n      index: this.props.index,\r\n      tabKey: this.props.tabKey\r\n    };\r\n  },\r\n\r\n  contextTypes: {\r\n    selectedIndex: React.PropTypes.number\r\n  }\r\n\r\n};\r\n\r\nMixins.Button = {\r\n  mixins: [Mixins.StyleableWithEvents],\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      name: \"default\",\r\n      title: \"\",\r\n      visible: true,\r\n      enabled: true,\r\n      active: false,\r\n      highlighted: false,\r\n      onClick: false,\r\n      onDoubleClick: false,\r\n      onContextMenu: false,\r\n      onChange: false\r\n    };\r\n  },\r\n\r\n  getInitialState: function () {\r\n    this.listeners.onClick = this._handleClick;\r\n    this.listeners.onDoubleClick = this._handleDoubleClick;\r\n    this.listeners.onContextMenu = this._handleContextMenu;\r\n    return {\r\n      visible: this.props.visible,\r\n      enabled: this.props.enabled,\r\n      active: this.props.active,\r\n      highlighted: this.props.highlighted\r\n    };\r\n  },\r\n\r\n  childContextTypes: {\r\n    btnTitle: React.PropTypes.string,\r\n    btnVisible: React.PropTypes.bool,\r\n    btnEnabled: React.PropTypes.bool,\r\n    btnActive: React.PropTypes.bool\r\n  },\r\n\r\n  getChildContext: function () {\r\n    return {\r\n      btnTitle: this.props.title,\r\n      btnVisible: this.state.visible,\r\n      btnEnabled: this.state.enabled,\r\n      btnActive: this.state.active\r\n    };\r\n  },\r\n\r\n  contextTypes: {\r\n    selectedIndex: React.PropTypes.number\r\n  },\r\n\r\n  getSheetMods: function (otherMods) {\r\n    var mods = otherMods || [];   //np\r\n    if (this.state.active && mods.indexOf('active') == -1) mods.push('active');\r\n    if (!this.state.visible && mods.indexOf('hidden') == -1) mods.push('hidden');\r\n    if (!this.state.enabled && mods.indexOf('disabled') == -1) mods.push('disabled');\r\n    if (this.state.highlighted && mods.indexOf('highlighted') == -1) mods.push('highlighted');\r\n\r\n    return mods;\r\n  },\r\n\r\n  _handleDoubleClick: function (ev) {\r\n    if (typeof this.props.onDoubleClick === \"function\" && this.props.onDoubleClick(ev, this) === false) return;\r\n\r\n    if (typeof this['handleDoubleClick'] === \"function\") {\r\n      return this['handleDoubleClick'](ev);\r\n    }\r\n  },\r\n\r\n  _handleClick: function (ev) {\r\n    if (typeof this.props.onClick === \"function\" && this.props.onClick(ev, this) === false) return;\r\n\r\n    if (typeof this['handleClick'] === \"function\") {\r\n      return this['handleClick'](ev);\r\n    }\r\n  },\r\n\r\n  _handleContextMenu: function (ev) {\r\n    if (typeof this.props.onContextMenu === \"function\" && this.props.onContextMenu(ev, this) === false) return;\r\n\r\n    if (typeof this['handleContextMenu'] === \"function\") {\r\n      return this['handleContextMenu'](ev);\r\n    }\r\n  }\r\n\r\n};\r\n\r\n\r\nvar FloatingPanel = React.createClass({\r\n  displayName: 'FloatingPanel',\r\n  mixins: [Mixins.PanelWrapper],\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      \"left\": 0,\r\n      \"top\": 0,\r\n      \"width\": 420,\r\n      \"maxHeight\":420,\r\n      \"style\": {}\r\n    };\r\n  },\r\n  propTypes: {\r\n    left:React.PropTypes.number.isRequired,\r\n    top:React.PropTypes.number.isRequired,\r\n    width:React.PropTypes.number.isRequired,\r\n    onClick:React.PropTypes.func,\r\n  }\r\n  ,getInitialState: function () {\r\n    this.skipUpdate = false;\r\n    return {\r\n      left: parseInt(this.props.left),\r\n      top: parseInt(this.props.top),\r\n      width: parseInt(this.props.width)\r\n    };\r\n  },\r\n\r\n  componentWillReceiveProps:function(nextProps) {\r\n    this.setState({width:nextProps.width});\r\n  }\r\n  ,dragStart: function (e) {\r\n    this.panelBounds = {\r\n      startLeft: this.state.left,\r\n      startTop: this.state.top,\r\n      startPageX: e.pageX,\r\n      startPageY: e.pageY\r\n    };\r\n\r\n    try {\r\n      var img = document.createElement(\"img\");\r\n      img.src = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABmJLR0QA/wD/AP+gvaeTAAAADUlEQVQI12NgYGBgAAAABQABXvMqOgAAAABJRU5ErkJggg==\";\r\n      img.width = 1;\r\n      e.dataTransfer.setData('text/plain', \"Panel\");\r\n      e.dataTransfer.setDragImage(img, -1000, -1000);\r\n    } catch (err) { /* Fix for IE */ }\r\n\r\n    window.addEventListener('dragover', this.dragOver);\r\n  },\r\n\r\n  dragEnd: function() {\r\n    delete this.panelBounds;\r\n    window.removeEventListener('dragover', this.dragOver);\r\n    if (this.props.onBoundsChange) {\r\n      this.props.onBoundsChange({left:this.state.left,top:this.state.top,width:this.state.width,\r\n        height:this.getDOMNode().offsetHeight});\r\n    }\r\n  },\r\n\r\n  dragOver: function(e) {\r\n    if (this.panelBounds || false) {\r\n      var left = this.panelBounds.startLeft + (e.pageX - this.panelBounds.startPageX),\r\n        top = this.panelBounds.startTop + (e.pageY - this.panelBounds.startPageY);\r\n      this.skipUpdate = true;\r\n      this.setState({ left: left, top: top });\r\n    }\r\n  },\r\n  handleMouseClick: function (e) {\r\n    if (typeof this.props.onClick === \"function\") {\r\n      this.props.onClick(e);\r\n    }\r\n  },\r\n  render: function() {\r\n    var transform = \"translate3d(\" + Utils.pixelsOf(this.state.left) + \", \" + Utils.pixelsOf(this.state.top) + \", 0)\",\r\n      wrapperStyle = React.addons.update({\r\n        WebkitTransform: transform,\r\n        MozTransform: transform,\r\n        msTransform: transform,\r\n        transform: transform,\r\n        width: Utils.pixelsOf(this.state.width),\r\n        position: \"absolute\"\r\n      }, {$merge: this.props.style});\r\n\r\n    if (!this.skipUpdate) {\r\n      var props = React.addons.update({\r\n          onDragStart: this.dragStart,\r\n          onDragEnd: this.dragEnd,\r\n          floating: true\r\n        }, {$merge: this.config}),\r\n        keys = Object.keys(this.props);\r\n\r\n      for (var i = keys.length; --i >= 0;) {\r\n        if ([\"children\", \"left\", \"top\", \"width\", \"style\"].indexOf(keys[i]) != -1) continue;\r\n        props[keys[i]] = this.props[keys[i]];\r\n      }\r\n      this.inner = (\r\n        React.createElement(ReactPanel, props,\r\n          this.props.children\r\n        )\r\n      );\r\n    } else {\r\n      this.skipUpdate = false;\r\n    }\r\n\r\n    return React.createElement(\"div\", {style:wrapperStyle,onClick:this.handleMouseClick}, this.inner);\r\n  }\r\n\r\n});\r\n\r\nvar Panel = React.createClass({\r\n  displayName: 'Panel',\r\n  mixins: [Mixins.PanelWrapper],\r\n\r\n  render: function() {\r\n    var props = React.addons.update({}, {$merge: this.config}),\r\n      keys = Object.keys(this.props);\r\n\r\n    for (var i = keys.length; --i >= 0;) {\r\n      if ([\"children\"].indexOf(keys[i]) != -1) continue;\r\n      props[keys[i]] = this.props[keys[i]];\r\n    }\r\n    return React.createElement(ReactPanel, props,\r\n        this.props.children\r\n    );\r\n  }\r\n\r\n});\r\n\r\nvar ReactPanel = React.createClass({\r\n  displayName: 'ReactPanel',\r\n  mixins: [Mixins.Styleable, Mixins.Transitions],\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      \"icon\": false,\r\n      \"title\": \"\",\r\n      \"autocompact\": true,\r\n      \"floating\": false,\r\n      \"onDragStart\": null,\r\n      \"onDragEnd\": null,\r\n      \"maxTitleWidth\": 130,\r\n      \"buttons\": [],\r\n      \"leftButtons\": []\r\n    };\r\n  },\r\n\r\n  getInitialState: function () {\r\n    return {\r\n      compacted: (this.props.autocompact)\r\n    };\r\n  },\r\n\r\n  contextTypes: {\r\n    selectedIndex: React.PropTypes.number,\r\n    sheet: React.PropTypes.func,\r\n    onTabChange: React.PropTypes.func,\r\n    globals: React.PropTypes.object\r\n  },\r\n\r\n  getSelectedIndex: function () {\r\n    return this.context.selectedIndex;\r\n  },\r\n\r\n  handleClick: function (event, index) {\r\n    this.context.onTabChange(parseInt(index));\r\n  },\r\n\r\n  componentDidMount: function () {\r\n    if (this.props.autocompact) {\r\n      var tabsStart = this.refs['tabs-start'].getDOMNode(),\r\n        tabsEnd = this.refs['tabs-end'].getDOMNode(),\r\n        using = this.refs.tabs.getDOMNode().offsetWidth,\r\n        total = tabsEnd.offsetLeft - (tabsStart.offsetLeft + tabsStart.offsetWidth);\r\n\r\n      if (using * 2 <= total) {   // TODO: ... * 2 is obviously not what it should be\r\n        this.setState({compacted: false});\r\n      }\r\n    }\r\n  },\r\n\r\n  componentWillReceiveProps: function(nextProps) {\r\n    if (this.props.autocompact) {\r\n      var childs = React.Children.count(this.props.children),\r\n        next_childs = React.Children.count(nextProps.children);\r\n\r\n      if (next_childs > childs && this.props.autocompact && !this.state.compacted) {\r\n        var tabsStart = this.refs['tabs-start'].getDOMNode(),\r\n          tabsEnd = this.refs['tabs-end'].getDOMNode(),\r\n          using = this.refs.tabs.getDOMNode().offsetWidth,\r\n          total = tabsEnd.offsetLeft - (tabsStart.offsetLeft + tabsStart.offsetWidth),\r\n          maxTabWidth = this.props.maxTitleWidth + 35;\r\n\r\n        if (using + maxTabWidth >= total) {\r\n          this.setState({compacted: true});\r\n        }\r\n      } else {\r\n        // TODO\r\n      }\r\n    }\r\n  },\r\n\r\n  handleDragStart: function (e) {\r\n    if (typeof this.props.onDragStart === \"function\") {\r\n      this.props.onDragStart(e);\r\n    }\r\n  },\r\n\r\n  handleDragEnd: function () {\r\n    if (typeof this.props.onDragEnd === \"function\") {\r\n      this.props.onDragEnd();\r\n    }\r\n  },\r\n\r\n  _getGroupedButtons: function (buttons) {\r\n    var len = buttons.length,\r\n      i, j, item, group = [], groups = [];\r\n\r\n    for (i = 0; i < len; ++i) {\r\n      item = buttons[i];\r\n\r\n      if (typeof item === \"object\" && item instanceof Array) {\r\n        if (group.length) {\r\n          groups.push(group);\r\n          group = [];\r\n        }\r\n        for (j = 0; j < item.length; ++j) {\r\n          group.push(React.addons.cloneWithProps(item[j], {key: j}));\r\n        }\r\n        if (group.length) {\r\n          groups.push(group);\r\n          group = [];\r\n        }\r\n      } else {\r\n        group.push(React.addons.cloneWithProps(item, {key: i}));\r\n      }\r\n    }\r\n    if (group.length) {\r\n      groups.push(group);\r\n    }\r\n\r\n    return groups;\r\n  },\r\n\r\n  render: function() {\r\n    var self = this,\r\n      draggable = (this.props.floating) ? \"true\" : \"false\",\r\n      sheet = this.getSheet(\"Panel\"),\r\n      tp = this.getTransitionProps(\"Panel\");\r\n\r\n    var icon = (this.props.icon) ? (\r\n        React.createElement(\"span\", {style:sheet.icon.style},\r\n          React.createElement(\"i\", {className:this.props.icon})\r\n        )\r\n      ) : null,\r\n      title = (this.props.title.length) ? (\r\n        React.createElement(\"div\", {style:sheet.box.style},\r\n          React.createElement(\"div\", {style:sheet.title.style},\r\n            this.props.title\r\n          )\r\n        )\r\n      ) : null;\r\n\r\n    var tabIndex = 0,\r\n      selectedIndex = this.getSelectedIndex(),\r\n      tabButtons = [],\r\n      tabs = [],\r\n      groupIndex = 0;\r\n\r\n    React.Children.forEach(self.props.children, function(child) {\r\n      var ref = \"tabb-\" + tabIndex,\r\n        tabKey = (typeof child.key !== \"undefined\" && child.key != null) ? child.key : ref,\r\n        showTitle = true,\r\n        props = {\r\n          \"icon\": child.props.icon,\r\n          \"title\": child.props.title,\r\n          \"pinned\": child.props.pinned\r\n        };\r\n\r\n      if (self.state.compacted) {\r\n        if (!(props.pinned || selectedIndex == tabIndex)) {\r\n          showTitle = false;\r\n        }\r\n      }\r\n\r\n      tabButtons.push(\r\n        React.createElement(TabButton, {key: tabKey, title: props.title, icon: props.icon,\r\n          index: tabIndex, ref: ref, showTitle: showTitle, onClick: self.handleClick})\r\n      );\r\n\r\n      tabs.push(\r\n        React.addons.cloneWithProps(child, {\r\n          key: tabIndex,\r\n          tabKey: tabKey,\r\n          selectedIndex: selectedIndex,\r\n          index: tabIndex\r\n        })\r\n      );\r\n      ++tabIndex;\r\n    });\r\n\r\n    return (\r\n      React.createElement(\"div\", {style: sheet.style},\r\n        React.createElement(\"header\", {draggable: draggable, onDragEnd: self.handleDragEnd,\r\n            onDragStart: self.handleDragStart, ref: \"header\", style: sheet.header.style},\r\n          icon, title,\r\n          React.createElement(\"div\", {style: sheet.tabsStart.style, ref: \"tabs-start\"}),\r\n          this._getGroupedButtons(this.props.leftButtons).map(function (group) {\r\n            return React.createElement(\"ul\", {style: sheet.group.style, key: groupIndex++}, group );\r\n          })\r\n          ,\r\n          React.createElement(ReactCSSTransitionGroup, {component: \"ul\", ref: \"tabs\", style: sheet.tabs.style, transitionName: tp.transitionName,\r\n              transitionAppear: tp.transitionAppear, transitionEnter: tp.transitionEnter,\r\n              transitionLeave: tp.transitionLeave},\r\n            tabButtons\r\n          ),\r\n          React.createElement(\"div\", {style: sheet.tabsEnd.style, ref: \"tabs-end\"}),\r\n          this._getGroupedButtons(this.props.rightButtons||this.props.buttons).map(function (group) {\r\n            return React.createElement(\"ul\", {style: sheet.group.style, key: groupIndex++}, group );\r\n          })\r\n        ),\r\n        React.createElement(\"div\", {style: sheet.body.style}, tabs )\r\n      )\r\n    );\r\n  }\r\n\r\n});\r\n\r\n\r\nvar TabButton = React.createClass({displayName: \"TabButton\",\r\n  mixins: [Mixins.StyleableWithEvents],\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      \"icon\": \"\",\r\n      \"title\": \"\",\r\n      \"index\": 0,\r\n      \"showTitle\": true\r\n    };\r\n  },\r\n\r\n  contextTypes: {\r\n    selectedIndex: React.PropTypes.number,\r\n    numTabs: React.PropTypes.number\r\n  },\r\n\r\n  handleClick: function (event) {\r\n    event.preventDefault();\r\n    this.props.onClick(event, this.props.index);\r\n  },\r\n\r\n  render: function() {\r\n    var icon = null,\r\n      title = \"\",\r\n      mods = (this.context.selectedIndex == this.props.index) ? ['active'] : [];\r\n\r\n    if (!(this.props.showTitle && this.props.title.length)) mods.push('untitled');\r\n    if (this.props.index == this.context.numTabs - 1) mods.push('last');\r\n    var sheet = this.getSheet(\"TabButton\", mods, {});\r\n\r\n    if (this.props.showTitle && this.props.title.length) {\r\n      title = React.createElement(\"div\", {style:sheet.title.style},this.props.title);\r\n    }\r\n\r\n    if (this.props.icon) {\r\n      icon = (\r\n        React.createElement(\"div\", {style:sheet.icon.style},\r\n          React.createElement(\"i\", {className:this.props.icon})\r\n        )\r\n      );\r\n    }\r\n\r\n    return (\r\n      React.createElement(\"li\", React.__spread({onClick: this.handleClick, style: sheet.style},  this.listeners),\r\n        React.createElement(\"div\", {title: this.props.title},\r\n          icon, React.createElement(\"div\", {style: sheet.box.style}, title)\r\n        )\r\n      )\r\n    );\r\n  }\r\n});\r\n\r\nvar Tab = React.createClass({\r\n  displayName: 'Tab',\r\n  mixins: [Mixins.Styleable, Mixins.Transitions],\r\n\r\n  propTypes: {\r\n    onActiveChanged: React.PropTypes.func\r\n  },\r\n\r\n  getDefaultProps: function () {\r\n    return {\r\n      \"icon\": \"\",\r\n      \"title\": \"\",\r\n      \"pinned\": false,\r\n      \"showToolbar\": true,\r\n      \"showFooter\": true,\r\n      \"panelComponentType\": \"Tab\",\r\n      \"automount\": false\r\n    };\r\n  },\r\n\r\n  contextTypes: {\r\n    selectedIndex: React.PropTypes.number,\r\n    index: React.PropTypes.number,\r\n    globals: React.PropTypes.object\r\n  },\r\n\r\n  componentDidMount: function () {\r\n    this._doEvents();\r\n  },\r\n\r\n  componentDidUpdate: function () {\r\n    this._doEvents();\r\n  },\r\n\r\n  _doEvents: function () {\r\n    if (typeof this.props.onActiveChanged === \"function\") {\r\n      this.wasActive = this.wasActive || false;\r\n      var active = this.isActive();\r\n      if (this.wasActive != active) {\r\n        this.props.onActiveChanged(this, active);\r\n        this.wasActive = active;\r\n      }\r\n    }\r\n  },\r\n\r\n  getValue: function (name) {\r\n    switch (name) {\r\n      case \"index\":\r\n        return (typeof this.props.index !== \"undefined\") ? this.props.index : this.context.index;\r\n      case \"selectedIndex\":\r\n        return this.context.selectedIndex;\r\n      case \"showToolbar\":\r\n        return this.props.showToolbar;\r\n      case \"showFooter\":\r\n        return this.props.showFooter;\r\n      case \"active\":\r\n        return this.isActive();\r\n      case \"hasToolbar\":\r\n        return this.hasToolbar || false;\r\n      case \"hasFooter\":\r\n        return this.hasFooter || false;\r\n      case \"mounted\":\r\n        return this.mounted || false;\r\n      case \"automount\":\r\n        return this.props.automount;\r\n      case \"numChilds\":\r\n        return React.Children.count(this.props.children);\r\n      case \"tabKey\":\r\n        return (typeof this.props.tabKey !== \"undefined\") ? this.props.tabKey : this.context.tabKey;\r\n    }\r\n  },\r\n\r\n  isActive: function () {\r\n    if (typeof this.props.index !== \"undefined\") {\r\n      return (this.props.index == this.context.selectedIndex);\r\n    } else {\r\n      return (this.context.index == this.context.selectedIndex);\r\n    }\r\n  },\r\n\r\n  render: function() {\r\n    var self = this,\r\n      numChilds = React.Children.count(this.props.children),\r\n      active = this.isActive(),\r\n      tp = this.getTransitionProps(),\r\n      mods = (active) ? ['active'] : [],\r\n      sheet = {};\r\n\r\n    this.mounted = (this.mounted || false) || this.props.automount || active;\r\n    this.hasToolbar=this.hasFooter=false;\r\n\r\n    var innerContent = (this.mounted) ? React.Children.map(self.props.children, function(child, i) {\r\n      var type = (i == 0 && numChilds >= 2) ? 0 : 1;   // 0: Toolbar, 1: Content, 2: Footer\r\n      if (React.isValidElement(child) && (typeof child.props.panelComponentType !== \"undefined\")) {\r\n        switch (String(child.props.panelComponentType)) {\r\n          case \"Toolbar\": type = 0; break;\r\n          case \"Content\": type = 1; break;\r\n          case \"Footer\": type = 2; break;\r\n        }\r\n      }\r\n      if (i == 0) {\r\n        if (type == 0) {\r\n          this.hasToolbar = true;\r\n          if (self.props.showToolbar) mods.push('withToolbar');\r\n        }\r\n        sheet = self.getSheet(\"Tab\", mods);\r\n      }\r\n      if (i == self.props.children.length-1) {\r\n        if (type == 2) {\r\n          this.hasFooter = true;\r\n          if (self.props.showFooter) mods.push('withFooter');\r\n        }\r\n      }\r\n      switch (type) {\r\n        case 0:\r\n          return (self.props.showToolbar) ? (\r\n            React.createElement(\"div\", {key: i, style: sheet.toolbar.style},\r\n              React.createElement(\"div\", {className: \"tab-toolbar\", style: sheet.toolbar.children.style},\r\n                child\r\n              )\r\n            )\r\n          ) : null;\r\n        case 1:\r\n          var contentStyle = React.addons.update({\r\n            overflowY: this.props.maxContentHeight?\"auto\":\"hidden\",\r\n            overflowX:\"hidden\",\r\n            maxHeight : this.props.maxContentHeight || \"none\",\r\n          }, {$merge: sheet.content.style});\r\n\r\n          return (\r\n            React.createElement(\"div\", {key: i, style: contentStyle},\r\n              React.createElement(\"div\", {className: \"tab-content\", style: sheet.content.children.style},\r\n                child\r\n              )\r\n            )\r\n          );\r\n        case 2:\r\n          return (self.props.showFooter) ? (\r\n            React.createElement(\"div\", {key: i, style: sheet.footer.style},\r\n              React.createElement(\"div\", {className: \"tab-footer\", style: sheet.footer.children.style},\r\n                child\r\n              )\r\n            )\r\n          ) : null;\r\n      }\r\n    }.bind(this)) : null;\r\n\r\n    return (\r\n      React.createElement(ReactCSSTransitionGroup, {component: \"div\", style: sheet.style, transitionName: tp.transitionName,\r\n          transitionAppear: tp.transitionAppear && active, transitionEnter: tp.transitionEnter && active,\r\n          transitionLeave: tp.transitionLeave && active},\r\n        innerContent\r\n      )\r\n    );\r\n\r\n  }\r\n\r\n});\r\n\r\n\r\nvar ToggleButton = React.createClass({\r\n  displayName: 'ToggleButton',\r\n  mixins: [Mixins.Button],\r\n\r\n  handleClick: function (ev) {\r\n    var self = this;\r\n\r\n    this.setState({active: !this.state.active});\r\n    this.forceUpdate(function () {\r\n      if (typeof self.props.onChange === \"function\") {\r\n        self.props.onChange(this);\r\n      }\r\n    });\r\n  },\r\n\r\n  render: function () {\r\n    var sheet = this.getSheet('Button');\r\n\r\n    //JSX source: https://github.com/Theadd/react-panels/blob/v2/src/jsx/buttons.jsx#L21-L25\r\n    return (\r\n      React.createElement(\"li\", React.__spread({style: sheet.style},  this.listeners, {title: this.props.title}),\r\n        React.createElement(\"span\", {style: sheet.children.style},\r\n          this.props.children\r\n        )\r\n      )\r\n    );\r\n  }\r\n});\r\n\r\nvar Button = React.createClass({\r\n  displayName: 'Button',\r\n  mixins: [Mixins.Button],\r\n\r\n  propTypes: {\r\n    onButtonClick: React.PropTypes.func\r\n  },\r\n\r\n  handleClick: function (ev) {\r\n    if (typeof this.props.onButtonClick === \"function\") {\r\n      this.props.onButtonClick(this, ev);\r\n    }\r\n  },\r\n\r\n  render: function () {\r\n    var sheet = this.getSheet('Button');\r\n\r\n    return (\r\n      React.createElement(\"li\", React.__spread({style: sheet.style},  this.listeners, {title: this.props.title}),\r\n        React.createElement(\"span\", {style: sheet.children.style},\r\n          this.props.children\r\n        )\r\n      )\r\n    );\r\n  }\r\n});\r\n\r\n\r\nvar Toolbar = React.createClass({\r\n  displayName: 'Toolbar',\r\n  mixins: [Mixins.Toolbar],\r\n\r\n  render: function () {\r\n    return React.createElement(\"div\", {}, this.props.children );\r\n  }\r\n\r\n});\r\n\r\nvar Content = React.createClass({\r\n  displayName: 'Content',\r\n  mixins: [Mixins.Content],\r\n\r\n  render: function () {\r\n    return React.createElement(\"div\", {}, this.props.children );\r\n  }\r\n\r\n});\r\n\r\nvar Footer = React.createClass({\r\n  displayName: 'Footer',\r\n  mixins: [Mixins.Footer],\r\n\r\n  render: function () {\r\n    return React.createElement(\"div\", {}, this.props.children );\r\n  }\r\n\r\n});\r\n\r\nvar PanelAddons = {};\r\n\r\nvar ReactPanels = {\r\n  Panel: Panel,\r\n  FloatingPanel: FloatingPanel,\r\n  ReactPanel: ReactPanel,\r\n  Tab: Tab,\r\n  Mixins: Mixins,\r\n  Toolbar: Toolbar,\r\n  Content: Content,\r\n  Footer: Footer,\r\n  ToggleButton: ToggleButton,\r\n  Button: Button,\r\n  addons: PanelAddons\r\n};\r\n\r\n\r\nmodule.exports = ReactPanels;\r\n",
    "module.exports = require('./src');\n",
    "'use strict';\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} once Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Holds the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  if (!this._events || !this._events[event]) return [];\n  if (this._events[event].fn) return [this._events[event].fn];\n\n  for (var i = 0, l = this._events[event].length, ee = new Array(l); i < l; i++) {\n    ee[i] = this._events[event][i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  if (!this._events || !this._events[event]) return false;\n\n  var listeners = this._events[event]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this);\n\n  if (!this._events) this._events = {};\n  if (!this._events[event]) this._events[event] = listener;\n  else {\n    if (!this._events[event].fn) this._events[event].push(listener);\n    else this._events[event] = [\n      this._events[event], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true);\n\n  if (!this._events) this._events = {};\n  if (!this._events[event]) this._events[event] = listener;\n  else {\n    if (!this._events[event].fn) this._events[event].push(listener);\n    else this._events[event] = [\n      this._events[event], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, once) {\n  if (!this._events || !this._events[event]) return this;\n\n  var listeners = this._events[event]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn && (listeners.fn !== fn || (once && !listeners.once))) {\n      events.push(listeners);\n    }\n    if (!listeners.fn) for (var i = 0, length = listeners.length; i < length; i++) {\n      if (listeners[i].fn !== fn || (once && !listeners[i].once)) {\n        events.push(listeners[i]);\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[event] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[event];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[event];\n  else this._events = {};\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the module.\n//\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.EventEmitter2 = EventEmitter;\nEventEmitter.EventEmitter3 = EventEmitter;\n\n//\n// Expose the module.\n//\nmodule.exports = EventEmitter;\n",
    "/*! Native Promise Only\n    v0.7.6-a (c) Kyle Simpson\n    MIT License: http://getify.mit-license.org\n*/\n!function(t,n,e){n[t]=n[t]||e(),\"undefined\"!=typeof module&&module.exports?module.exports=n[t]:\"function\"==typeof define&&define.amd&&define(function(){return n[t]})}(\"Promise\",\"undefined\"!=typeof global?global:this,function(){\"use strict\";function t(t,n){l.add(t,n),h||(h=y(l.drain))}function n(t){var n,e=typeof t;return null==t||\"object\"!=e&&\"function\"!=e||(n=t.then),\"function\"==typeof n?n:!1}function e(){for(var t=0;t<this.chain.length;t++)o(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function o(t,e,o){var r,i;try{e===!1?o.reject(t.msg):(r=e===!0?t.msg:e.call(void 0,t.msg),r===o.promise?o.reject(TypeError(\"Promise-chain cycle\")):(i=n(r))?i.call(r,o.resolve,o.reject):o.resolve(r))}catch(c){o.reject(c)}}function r(o){var c,u,a=this;if(!a.triggered){a.triggered=!0,a.def&&(a=a.def);try{(c=n(o))?(u=new f(a),c.call(o,function(){r.apply(u,arguments)},function(){i.apply(u,arguments)})):(a.msg=o,a.state=1,a.chain.length>0&&t(e,a))}catch(s){i.call(u||new f(a),s)}}}function i(n){var o=this;o.triggered||(o.triggered=!0,o.def&&(o=o.def),o.msg=n,o.state=2,o.chain.length>0&&t(e,o))}function c(t,n,e,o){for(var r=0;r<n.length;r++)!function(r){t.resolve(n[r]).then(function(t){e(r,t)},o)}(r)}function f(t){this.def=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function a(n){if(\"function\"!=typeof n)throw TypeError(\"Not a function\");if(0!==this.__NPO__)throw TypeError(\"Not a promise\");this.__NPO__=1;var o=new u(this);this.then=function(n,r){var i={success:\"function\"==typeof n?n:!0,failure:\"function\"==typeof r?r:!1};return i.promise=new this.constructor(function(t,n){if(\"function\"!=typeof t||\"function\"!=typeof n)throw TypeError(\"Not a function\");i.resolve=t,i.reject=n}),o.chain.push(i),0!==o.state&&t(e,o),i.promise},this[\"catch\"]=function(t){return this.then(void 0,t)};try{n.call(void 0,function(t){r.call(o,t)},function(t){i.call(o,t)})}catch(c){i.call(o,c)}}var s,h,l,p=Object.prototype.toString,y=\"undefined\"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},\"x\",{}),s=function(t,n,e,o){return Object.defineProperty(t,n,{value:e,writable:!0,configurable:o!==!1})}}catch(d){s=function(t,n,e){return t[n]=e,t}}l=function(){function t(t,n){this.fn=t,this.self=n,this.next=void 0}var n,e,o;return{add:function(r,i){o=new t(r,i),e?e.next=o:n=o,e=o,o=void 0},drain:function(){var t=n;for(n=e=h=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=s({},\"constructor\",a,!1);return s(a,\"prototype\",g,!1),s(g,\"__NPO__\",0,!1),s(a,\"resolve\",function(t){var n=this;return t&&\"object\"==typeof t&&1===t.__NPO__?t:new n(function(n,e){if(\"function\"!=typeof n||\"function\"!=typeof e)throw TypeError(\"Not a function\");n(t)})}),s(a,\"reject\",function(t){return new this(function(n,e){if(\"function\"!=typeof n||\"function\"!=typeof e)throw TypeError(\"Not a function\");e(t)})}),s(a,\"all\",function(t){var n=this;return\"[object Array]\"!=p.call(t)?n.reject(TypeError(\"Not an array\")):0===t.length?n.resolve([]):new n(function(e,o){if(\"function\"!=typeof e||\"function\"!=typeof o)throw TypeError(\"Not a function\");var r=t.length,i=Array(r),f=0;c(n,t,function(t,n){i[t]=n,++f===r&&e(i)},o)})}),s(a,\"race\",function(t){var n=this;return\"[object Array]\"!=p.call(t)?n.reject(TypeError(\"Not an array\")):new n(function(e,o){if(\"function\"!=typeof e||\"function\"!=typeof o)throw TypeError(\"Not a function\");c(n,t,function(t,n){e(n)},o)})}),a});\n",
    "/**\n * A module of methods that you want to include in all actions.\n * This module is consumed by `createAction`.\n */\nmodule.exports = {\n};\n",
    "exports.createdStores = [];\n\nexports.createdActions = [];\n\nexports.reset = function() {\n    while(exports.createdStores.length) {\n        exports.createdStores.pop();\n    }\n    while(exports.createdActions.length) {\n        exports.createdActions.pop();\n    }\n};\n",
    "var _ = require('./utils'),\n    maker = require('./joins').instanceJoinCreator;\n\n/**\n * Extract child listenables from a parent from their\n * children property and return them in a keyed Object\n *\n * @param {Object} listenable The parent listenable\n */\nvar mapChildListenables = function(listenable) {\n    var i = 0, children = {}, childName;\n    for (;i < (listenable.children||[]).length; ++i) {\n        childName = listenable.children[i];\n        if(listenable[childName]){\n            children[childName] = listenable[childName];\n        }\n    }\n    return children;\n};\n\n/**\n * Make a flat dictionary of all listenables including their\n * possible children (recursively), concatenating names in camelCase.\n *\n * @param {Object} listenables The top-level listenables\n */\nvar flattenListenables = function(listenables) {\n    var flattened = {};\n    for(var key in listenables){\n        var listenable = listenables[key];\n        var childMap = mapChildListenables(listenable);\n\n        // recursively flatten children\n        var children = flattenListenables(childMap);\n\n        // add the primary listenable and chilren\n        flattened[key] = listenable;\n        for(var childKey in children){\n            var childListenable = children[childKey];\n            flattened[key + _.capitalize(childKey)] = childListenable;\n        }\n    }\n\n    return flattened;\n};\n\n/**\n * A module of methods related to listening.\n */\nmodule.exports = {\n\n    /**\n     * An internal utility function used by `validateListening`\n     *\n     * @param {Action|Store} listenable The listenable we want to search for\n     * @returns {Boolean} The result of a recursive search among `this.subscriptions`\n     */\n    hasListener: function(listenable) {\n        var i = 0, j, listener, listenables;\n        for (;i < (this.subscriptions||[]).length; ++i) {\n            listenables = [].concat(this.subscriptions[i].listenable);\n            for (j = 0; j < listenables.length; j++){\n                listener = listenables[j];\n                if (listener === listenable || listener.hasListener && listener.hasListener(listenable)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n\n    /**\n     * A convenience method that listens to all listenables in the given object.\n     *\n     * @param {Object} listenables An object of listenables. Keys will be used as callback method names.\n     */\n    listenToMany: function(listenables){\n        var allListenables = flattenListenables(listenables);\n        for(var key in allListenables){\n            var cbname = _.callbackName(key),\n                localname = this[cbname] ? cbname : this[key] ? key : undefined;\n            if (localname){\n                this.listenTo(allListenables[key],localname,this[cbname+\"Default\"]||this[localname+\"Default\"]||localname);\n            }\n        }\n    },\n\n    /**\n     * Checks if the current context can listen to the supplied listenable\n     *\n     * @param {Action|Store} listenable An Action or Store that should be\n     *  listened to.\n     * @returns {String|Undefined} An error message, or undefined if there was no problem.\n     */\n    validateListening: function(listenable){\n        if (listenable === this) {\n            return \"Listener is not able to listen to itself\";\n        }\n        if (!_.isFunction(listenable.listen)) {\n            return listenable + \" is missing a listen method\";\n        }\n        if (listenable.hasListener && listenable.hasListener(this)) {\n            return \"Listener cannot listen to this listenable because of circular loop\";\n        }\n    },\n\n    /**\n     * Sets up a subscription to the given listenable for the context object\n     *\n     * @param {Action|Store} listenable An Action or Store that should be\n     *  listened to.\n     * @param {Function|String} callback The callback to register as event handler\n     * @param {Function|String} defaultCallback The callback to register as default handler\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is the object being listened to\n     */\n    listenTo: function(listenable, callback, defaultCallback) {\n        var desub, unsubscriber, subscriptionobj, subs = this.subscriptions = this.subscriptions || [];\n        _.throwIf(this.validateListening(listenable));\n        this.fetchInitialState(listenable, defaultCallback);\n        desub = listenable.listen(this[callback]||callback, this);\n        unsubscriber = function() {\n            var index = subs.indexOf(subscriptionobj);\n            _.throwIf(index === -1,'Tried to remove listen already gone from subscriptions list!');\n            subs.splice(index, 1);\n            desub();\n        };\n        subscriptionobj = {\n            stop: unsubscriber,\n            listenable: listenable\n        };\n        subs.push(subscriptionobj);\n        return subscriptionobj;\n    },\n\n    /**\n     * Stops listening to a single listenable\n     *\n     * @param {Action|Store} listenable The action or store we no longer want to listen to\n     * @returns {Boolean} True if a subscription was found and removed, otherwise false.\n     */\n    stopListeningTo: function(listenable){\n        var sub, i = 0, subs = this.subscriptions || [];\n        for(;i < subs.length; i++){\n            sub = subs[i];\n            if (sub.listenable === listenable){\n                sub.stop();\n                _.throwIf(subs.indexOf(sub)!==-1,'Failed to remove listen from subscriptions list!');\n                return true;\n            }\n        }\n        return false;\n    },\n\n    /**\n     * Stops all subscriptions and empties subscriptions array\n     */\n    stopListeningToAll: function(){\n        var remaining, subs = this.subscriptions || [];\n        while((remaining=subs.length)){\n            subs[0].stop();\n            _.throwIf(subs.length!==remaining-1,'Failed to remove listen from subscriptions list!');\n        }\n    },\n\n    /**\n     * Used in `listenTo`. Fetches initial data from a publisher if it has a `getInitialState` method.\n     * @param {Action|Store} listenable The publisher we want to get initial state from\n     * @param {Function|String} defaultCallback The method to receive the data\n     */\n    fetchInitialState: function (listenable, defaultCallback) {\n        defaultCallback = (defaultCallback && this[defaultCallback]) || defaultCallback;\n        var me = this;\n        if (_.isFunction(defaultCallback) && _.isFunction(listenable.getInitialState)) {\n            var data = listenable.getInitialState();\n            if (data && _.isFunction(data.then)) {\n                data.then(function() {\n                    defaultCallback.apply(me, arguments);\n                });\n            } else {\n                defaultCallback.call(this, data);\n            }\n        }\n    },\n\n    /**\n     * The callback will be called once all listenables have triggered at least once.\n     * It will be invoked with the last emission from each listenable.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinTrailing: maker(\"last\"),\n\n    /**\n     * The callback will be called once all listenables have triggered at least once.\n     * It will be invoked with the first emission from each listenable.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinLeading: maker(\"first\"),\n\n    /**\n     * The callback will be called once all listenables have triggered at least once.\n     * It will be invoked with all emission from each listenable.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinConcat: maker(\"all\"),\n\n    /**\n     * The callback will be called once all listenables have triggered.\n     * If a callback triggers twice before that happens, an error is thrown.\n     * @param {...Publishers} publishers Publishers that should be tracked.\n     * @param {Function|String} callback The method to call when all publishers have emitted\n     * @returns {Object} A subscription obj where `stop` is an unsub function and `listenable` is an array of listenables\n     */\n    joinStrict: maker(\"strict\")\n};\n",
    "var _ = require('./utils'),\n    ListenerMethods = require('./ListenerMethods');\n\n/**\n * A module meant to be consumed as a mixin by a React component. Supplies the methods from\n * `ListenerMethods` mixin and takes care of teardown of subscriptions.\n * Note that if you're using the `connect` mixin you don't need this mixin, as connect will\n * import everything this mixin contains!\n */\nmodule.exports = _.extend({\n\n    /**\n     * Cleans up all listener previously registered.\n     */\n    componentWillUnmount: ListenerMethods.stopListeningToAll\n\n}, ListenerMethods);\n",
    "var _ = require('./utils');\n\n/**\n * A module of methods for object that you want to be able to listen to.\n * This module is consumed by `createStore` and `createAction`\n */\nmodule.exports = {\n\n    /**\n     * Hook used by the publisher that is invoked before emitting\n     * and before `shouldEmit`. The arguments are the ones that the action\n     * is invoked with. If this function returns something other than\n     * undefined, that will be passed on as arguments for shouldEmit and\n     * emission.\n     */\n    preEmit: function() {},\n\n    /**\n     * Hook used by the publisher after `preEmit` to determine if the\n     * event should be emitted with given arguments. This may be overridden\n     * in your application, default implementation always returns true.\n     *\n     * @returns {Boolean} true if event should be emitted\n     */\n    shouldEmit: function() { return true; },\n\n    /**\n     * Subscribes the given callback for action triggered\n     *\n     * @param {Function} callback The callback to register as event handler\n     * @param {Mixed} [optional] bindContext The context to bind the callback with\n     * @returns {Function} Callback that unsubscribes the registered event handler\n     */\n    listen: function(callback, bindContext) {\n        bindContext = bindContext || this;\n        var eventHandler = function(args) {\n            if (aborted){\n                return;\n            }\n            callback.apply(bindContext, args);\n        }, me = this, aborted = false;\n        this.emitter.addListener(this.eventLabel, eventHandler);\n        return function() {\n            aborted = true;\n            me.emitter.removeListener(me.eventLabel, eventHandler);\n        };\n    },\n\n    /**\n     * Attach handlers to promise that trigger the completed and failed\n     * child publishers, if available.\n     *\n     * @param {Object} The promise to attach to\n     */\n    promise: function(promise) {\n        var me = this;\n\n        var canHandlePromise =\n            this.children.indexOf('completed') >= 0 &&\n            this.children.indexOf('failed') >= 0;\n\n        if (!canHandlePromise){\n            throw new Error('Publisher must have \"completed\" and \"failed\" child publishers');\n        }\n\n        promise.then(function(response) {\n            return me.completed(response);\n        }, function(error) {\n            return me.failed(error);\n        });\n    },\n\n    /**\n     * Subscribes the given callback for action triggered, which should\n     * return a promise that in turn is passed to `this.promise`\n     *\n     * @param {Function} callback The callback to register as event handler\n     */\n    listenAndPromise: function(callback, bindContext) {\n        var me = this;\n        bindContext = bindContext || this;\n        this.willCallPromise = (this.willCallPromise || 0) + 1;\n\n        var removeListen = this.listen(function() {\n\n            if (!callback) {\n                throw new Error('Expected a function returning a promise but got ' + callback);\n            }\n\n            var args = arguments,\n                promise = callback.apply(bindContext, args);\n            return me.promise.call(me, promise);\n        }, bindContext);\n\n        return function () {\n          me.willCallPromise--;\n          removeListen.call(me);\n        };\n\n    },\n\n    /**\n     * Publishes an event using `this.emitter` (if `shouldEmit` agrees)\n     */\n    trigger: function() {\n        var args = arguments,\n            pre = this.preEmit.apply(this, args);\n        args = pre === undefined ? args : _.isArguments(pre) ? pre : [].concat(pre);\n        if (this.shouldEmit.apply(this, args)) {\n            this.emitter.emit(this.eventLabel, args);\n        }\n    },\n\n    /**\n     * Tries to publish the event on the next tick\n     */\n    triggerAsync: function(){\n        var args = arguments,me = this;\n        _.nextTick(function() {\n            me.trigger.apply(me, args);\n        });\n    },\n\n    /**\n     * Returns a Promise for the triggered action\n     *\n     * @return {Promise}\n     *   Resolved by completed child action.\n     *   Rejected by failed child action.\n     *   If listenAndPromise'd, then promise associated to this trigger.\n     *   Otherwise, the promise is for next child action completion.\n     */\n    triggerPromise: function(){\n        var me = this;\n        var args = arguments;\n\n        var canHandlePromise =\n            this.children.indexOf('completed') >= 0 &&\n            this.children.indexOf('failed') >= 0;\n\n        var promise = _.createPromise(function(resolve, reject) {\n            // If `listenAndPromise` is listening\n            // patch `promise` w/ context-loaded resolve/reject\n            if (me.willCallPromise) {\n                _.nextTick(function() {\n                    var old_promise_method = me.promise;\n                    me.promise = function (promise) {\n                        promise.then(resolve, reject);\n                        // Back to your regularly schedule programming.\n                        me.promise = old_promise_method;\n                        return me.promise.apply(me, arguments);\n                    };\n                    me.trigger.apply(me, args);\n                });\n                return;\n            }\n\n            if (canHandlePromise) {\n                var removeSuccess = me.completed.listen(function(args) {\n                    removeSuccess();\n                    removeFailed();\n                    resolve(args);\n                });\n\n                var removeFailed = me.failed.listen(function(args) {\n                    removeSuccess();\n                    removeFailed();\n                    reject(args);\n                });\n            }\n\n            me.triggerAsync.apply(me, args);\n\n            if (!canHandlePromise) {\n                resolve();\n            }\n        });\n\n        return promise;\n    }\n};\n",
    "/**\n * A module of methods that you want to include in all stores.\n * This module is consumed by `createStore`.\n */\nmodule.exports = {\n};\n",
    "module.exports = function(store, definition) {\n  for (var name in definition) {\n    if (Object.getOwnPropertyDescriptor && Object.defineProperty) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(definition, name);\n\n        if (!propertyDescriptor.value || typeof propertyDescriptor.value !== 'function' || !definition.hasOwnProperty(name)) {\n            continue;\n        }\n\n        store[name] = definition[name].bind(store);\n    } else {\n        var property = definition[name];\n\n        if (typeof property !== 'function' || !definition.hasOwnProperty(name)) {\n            continue;\n        }\n\n        store[name] = property.bind(store);\n    }\n  }\n\n  return store;\n};\n",
    "var Reflux = require('./index'),\n    _ = require('./utils');\n\nmodule.exports = function(listenable,key){\n    return {\n        getInitialState: function(){\n            if (!_.isFunction(listenable.getInitialState)) {\n                return {};\n            } else if (key === undefined) {\n                return listenable.getInitialState();\n            } else {\n                return _.object([key],[listenable.getInitialState()]);\n            }\n        },\n        componentDidMount: function(){\n            _.extend(this,Reflux.ListenerMethods);\n            var me = this, cb = (key === undefined ? this.setState : function(v){me.setState(_.object([key],[v]));});\n            this.listenTo(listenable,cb);\n        },\n        componentWillUnmount: Reflux.ListenerMixin.componentWillUnmount\n    };\n};\n",
    "var Reflux = require('./index'),\n  _ = require('./utils');\n\nmodule.exports = function(listenable, key, filterFunc) {\n    filterFunc = _.isFunction(key) ? key : filterFunc;\n    return {\n        getInitialState: function() {\n            if (!_.isFunction(listenable.getInitialState)) {\n                return {};\n            } else if (_.isFunction(key)) {\n                return filterFunc.call(this, listenable.getInitialState());\n            } else {\n                // Filter initial payload from store.\n                var result = filterFunc.call(this, listenable.getInitialState());\n                if (result) {\n                  return _.object([key], [result]);\n                } else {\n                  return {};\n                }\n            }\n        },\n        componentDidMount: function() {\n            _.extend(this, Reflux.ListenerMethods);\n            var me = this;\n            var cb = function(value) {\n                if (_.isFunction(key)) {\n                    me.setState(filterFunc.call(me, value));\n                } else {\n                    var result = filterFunc.call(me, value);\n                    me.setState(_.object([key], [result]));\n                }\n            };\n\n            this.listenTo(listenable, cb);\n        },\n        componentWillUnmount: Reflux.ListenerMixin.componentWillUnmount\n    };\n};\n\n",
    "var _ = require('./utils'),\n    Reflux = require('./index'),\n    Keep = require('./Keep'),\n    allowed = {preEmit:1,shouldEmit:1};\n\n/**\n * Creates an action functor object. It is mixed in with functions\n * from the `PublisherMethods` mixin. `preEmit` and `shouldEmit` may\n * be overridden in the definition object.\n *\n * @param {Object} definition The action object definition\n */\nvar createAction = function(definition) {\n\n    definition = definition || {};\n    if (!_.isObject(definition)){\n        definition = {actionName: definition};\n    }\n\n    for(var a in Reflux.ActionMethods){\n        if (!allowed[a] && Reflux.PublisherMethods[a]) {\n            throw new Error(\"Cannot override API method \" + a +\n                \" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.\"\n            );\n        }\n    }\n\n    for(var d in definition){\n        if (!allowed[d] && Reflux.PublisherMethods[d]) {\n            throw new Error(\"Cannot override API method \" + d +\n                \" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.\"\n            );\n        }\n    }\n\n    definition.children = definition.children || [];\n    if (definition.asyncResult){\n        definition.children = definition.children.concat([\"completed\",\"failed\"]);\n    }\n\n    var i = 0, childActions = {};\n    for (; i < definition.children.length; i++) {\n        var name = definition.children[i];\n        childActions[name] = createAction(name);\n    }\n\n    var context = _.extend({\n        eventLabel: \"action\",\n        emitter: new _.EventEmitter(),\n        _isAction: true\n    }, Reflux.PublisherMethods, Reflux.ActionMethods, definition);\n\n    var functor = function() {\n        return functor[functor.sync?\"trigger\":\"triggerPromise\"].apply(functor, arguments);\n    };\n\n    _.extend(functor,childActions,context);\n\n    Keep.createdActions.push(functor);\n\n    return functor;\n\n};\n\nmodule.exports = createAction;\n",
    "var _ = require('./utils'),\n    Reflux = require('./index'),\n    Keep = require('./Keep'),\n    mixer = require('./mixer'),\n    allowed = {preEmit:1,shouldEmit:1},\n    bindMethods = require('./bindMethods');\n\n/**\n * Creates an event emitting Data Store. It is mixed in with functions\n * from the `ListenerMethods` and `PublisherMethods` mixins. `preEmit`\n * and `shouldEmit` may be overridden in the definition object.\n *\n * @param {Object} definition The data store object definition\n * @returns {Store} A data store instance\n */\nmodule.exports = function(definition) {\n\n    definition = definition || {};\n\n    for(var a in Reflux.StoreMethods){\n        if (!allowed[a] && (Reflux.PublisherMethods[a] || Reflux.ListenerMethods[a])){\n            throw new Error(\"Cannot override API method \" + a +\n                \" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.\"\n            );\n        }\n    }\n\n    for(var d in definition){\n        if (!allowed[d] && (Reflux.PublisherMethods[d] || Reflux.ListenerMethods[d])){\n            throw new Error(\"Cannot override API method \" + d +\n                \" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.\"\n            );\n        }\n    }\n\n    definition = mixer(definition);\n\n    function Store() {\n        var i=0, arr;\n        this.subscriptions = [];\n        this.emitter = new _.EventEmitter();\n        this.eventLabel = \"change\";\n        bindMethods(this, definition);\n        if (this.init && _.isFunction(this.init)) {\n            this.init();\n        }\n        if (this.listenables){\n            arr = [].concat(this.listenables);\n            for(;i < arr.length;i++){\n                this.listenToMany(arr[i]);\n            }\n        }\n    }\n\n    _.extend(Store.prototype, Reflux.ListenerMethods, Reflux.PublisherMethods, Reflux.StoreMethods, definition);\n\n    var store = new Store();\n    Keep.createdStores.push(store);\n\n    return store;\n};\n",
    "exports.ActionMethods = require('./ActionMethods');\n\nexports.ListenerMethods = require('./ListenerMethods');\n\nexports.PublisherMethods = require('./PublisherMethods');\n\nexports.StoreMethods = require('./StoreMethods');\n\nexports.createAction = require('./createAction');\n\nexports.createStore = require('./createStore');\n\nexports.connect = require('./connect');\n\nexports.connectFilter = require('./connectFilter');\n\nexports.ListenerMixin = require('./ListenerMixin');\n\nexports.listenTo = require('./listenTo');\n\nexports.listenToMany = require('./listenToMany');\n\n\nvar maker = require('./joins').staticJoinCreator;\n\nexports.joinTrailing = exports.all = maker(\"last\"); // Reflux.all alias for backward compatibility\n\nexports.joinLeading = maker(\"first\");\n\nexports.joinStrict = maker(\"strict\");\n\nexports.joinConcat = maker(\"all\");\n\nvar _ = require('./utils');\n\nexports.EventEmitter = _.EventEmitter;\n\nexports.Promise = _.Promise;\n\n/**\n * Convenience function for creating a set of actions\n *\n * @param definitions the definitions for the actions to be created\n * @returns an object with actions of corresponding action names\n */\nexports.createActions = function(definitions) {\n    var actions = {};\n    for (var k in definitions){\n        if (definitions.hasOwnProperty(k)) {\n            var val = definitions[k],\n                actionName = _.isObject(val) ? k : val;\n\n            actions[actionName] = exports.createAction(val);\n        }\n    }\n    return actions;\n};\n\n/**\n * Sets the eventmitter that Reflux uses\n */\nexports.setEventEmitter = function(ctx) {\n    var _ = require('./utils');\n    exports.EventEmitter = _.EventEmitter = ctx;\n};\n\n\n/**\n * Sets the Promise library that Reflux uses\n */\nexports.setPromise = function(ctx) {\n    var _ = require('./utils');\n    exports.Promise = _.Promise = ctx;\n};\n\n\n/**\n * Sets the Promise factory that creates new promises\n * @param {Function} factory has the signature `function(resolver) { return [new Promise]; }`\n */\nexports.setPromiseFactory = function(factory) {\n    var _ = require('./utils');\n    _.createPromise = factory;\n};\n\n\n/**\n * Sets the method used for deferring actions and stores\n */\nexports.nextTick = function(nextTick) {\n    var _ = require('./utils');\n    _.nextTick = nextTick;\n};\n\n/**\n * Provides the set of created actions and stores for introspection\n */\nexports.__keep = require('./Keep');\n\n/**\n * Warn if Function.prototype.bind not available\n */\nif (!Function.prototype.bind) {\n  console.error(\n    'Function.prototype.bind not available. ' +\n    'ES5 shim required. ' +\n    'https://github.com/spoike/refluxjs#es5'\n  );\n}\n",
    "/**\n * Internal module used to create static and instance join methods\n */\n\nvar slice = Array.prototype.slice,\n    _ = require(\"./utils\"),\n    createStore = require(\"./createStore\"),\n    strategyMethodNames = {\n        strict: \"joinStrict\",\n        first: \"joinLeading\",\n        last: \"joinTrailing\",\n        all: \"joinConcat\"\n    };\n\n/**\n * Used in `index.js` to create the static join methods\n * @param {String} strategy Which strategy to use when tracking listenable trigger arguments\n * @returns {Function} A static function which returns a store with a join listen on the given listenables using the given strategy\n */\nexports.staticJoinCreator = function(strategy){\n    return function(/* listenables... */) {\n        var listenables = slice.call(arguments);\n        return createStore({\n            init: function(){\n                this[strategyMethodNames[strategy]].apply(this,listenables.concat(\"triggerAsync\"));\n            }\n        });\n    };\n};\n\n/**\n * Used in `ListenerMethods.js` to create the instance join methods\n * @param {String} strategy Which strategy to use when tracking listenable trigger arguments\n * @returns {Function} An instance method which sets up a join listen on the given listenables using the given strategy\n */\nexports.instanceJoinCreator = function(strategy){\n    return function(/* listenables..., callback*/){\n        _.throwIf(arguments.length < 3,'Cannot create a join with less than 2 listenables!');\n        var listenables = slice.call(arguments),\n            callback = listenables.pop(),\n            numberOfListenables = listenables.length,\n            join = {\n                numberOfListenables: numberOfListenables,\n                callback: this[callback]||callback,\n                listener: this,\n                strategy: strategy\n            }, i, cancels = [], subobj;\n        for (i = 0; i < numberOfListenables; i++) {\n            _.throwIf(this.validateListening(listenables[i]));\n        }\n        for (i = 0; i < numberOfListenables; i++) {\n            cancels.push(listenables[i].listen(newListener(i,join),this));\n        }\n        reset(join);\n        subobj = {listenable: listenables};\n        subobj.stop = makeStopper(subobj,cancels,this);\n        this.subscriptions = (this.subscriptions || []).concat(subobj);\n        return subobj;\n    };\n};\n\n// ---- internal join functions ----\n\nfunction makeStopper(subobj,cancels,context){\n    return function() {\n        var i, subs = context.subscriptions,\n            index = (subs ? subs.indexOf(subobj) : -1);\n        _.throwIf(index === -1,'Tried to remove join already gone from subscriptions list!');\n        for(i=0;i < cancels.length; i++){\n            cancels[i]();\n        }\n        subs.splice(index, 1);\n    };\n}\n\nfunction reset(join) {\n    join.listenablesEmitted = new Array(join.numberOfListenables);\n    join.args = new Array(join.numberOfListenables);\n}\n\nfunction newListener(i,join) {\n    return function() {\n        var callargs = slice.call(arguments);\n        if (join.listenablesEmitted[i]){\n            switch(join.strategy){\n                case \"strict\": throw new Error(\"Strict join failed because listener triggered twice.\");\n                case \"last\": join.args[i] = callargs; break;\n                case \"all\": join.args[i].push(callargs);\n            }\n        } else {\n            join.listenablesEmitted[i] = true;\n            join.args[i] = (join.strategy===\"all\"?[callargs]:callargs);\n        }\n        emitIfAllListenablesEmitted(join);\n    };\n}\n\nfunction emitIfAllListenablesEmitted(join) {\n    for (var i = 0; i < join.numberOfListenables; i++) {\n        if (!join.listenablesEmitted[i]) {\n            return;\n        }\n    }\n    join.callback.apply(join.listener,join.args);\n    reset(join);\n}\n",
    "var Reflux = require('./index');\n\n\n/**\n * A mixin factory for a React component. Meant as a more convenient way of using the `ListenerMixin`,\n * without having to manually set listeners in the `componentDidMount` method.\n *\n * @param {Action|Store} listenable An Action or Store that should be\n *  listened to.\n * @param {Function|String} callback The callback to register as event handler\n * @param {Function|String} defaultCallback The callback to register as default handler\n * @returns {Object} An object to be used as a mixin, which sets up the listener for the given listenable.\n */\nmodule.exports = function(listenable,callback,initial){\n    return {\n        /**\n         * Set up the mixin before the initial rendering occurs. Import methods from `ListenerMethods`\n         * and then make the call to `listenTo` with the arguments provided to the factory function\n         */\n        componentDidMount: function() {\n            for(var m in Reflux.ListenerMethods){\n                if (this[m] !== Reflux.ListenerMethods[m]){\n                    if (this[m]){\n                        throw \"Can't have other property '\"+m+\"' when using Reflux.listenTo!\";\n                    }\n                    this[m] = Reflux.ListenerMethods[m];\n                }\n            }\n            this.listenTo(listenable,callback,initial);\n        },\n        /**\n         * Cleans up all listener previously registered.\n         */\n        componentWillUnmount: Reflux.ListenerMethods.stopListeningToAll\n    };\n};\n",
    "var Reflux = require('./index');\n\n/**\n * A mixin factory for a React component. Meant as a more convenient way of using the `listenerMixin`,\n * without having to manually set listeners in the `componentDidMount` method. This version is used\n * to automatically set up a `listenToMany` call.\n *\n * @param {Object} listenables An object of listenables\n * @returns {Object} An object to be used as a mixin, which sets up the listeners for the given listenables.\n */\nmodule.exports = function(listenables){\n    return {\n        /**\n         * Set up the mixin before the initial rendering occurs. Import methods from `ListenerMethods`\n         * and then make the call to `listenTo` with the arguments provided to the factory function\n         */\n        componentDidMount: function() {\n            for(var m in Reflux.ListenerMethods){\n                if (this[m] !== Reflux.ListenerMethods[m]){\n                    if (this[m]){\n                        throw \"Can't have other property '\"+m+\"' when using Reflux.listenToMany!\";\n                    }\n                    this[m] = Reflux.ListenerMethods[m];\n                }\n            }\n            this.listenToMany(listenables);\n        },\n        /**\n         * Cleans up all listener previously registered.\n         */\n        componentWillUnmount: Reflux.ListenerMethods.stopListeningToAll\n    };\n};\n",
    "var _ = require('./utils');\n\nmodule.exports = function mix(def) {\n    var composed = {\n        init: [],\n        preEmit: [],\n        shouldEmit: []\n    };\n\n    var updated = (function mixDef(mixin) {\n        var mixed = {};\n        if (mixin.mixins) {\n            mixin.mixins.forEach(function (subMixin) {\n                _.extend(mixed, mixDef(subMixin));\n            });\n        }\n        _.extend(mixed, mixin);\n        Object.keys(composed).forEach(function (composable) {\n            if (mixin.hasOwnProperty(composable)) {\n                composed[composable].push(mixin[composable]);\n            }\n        });\n        return mixed;\n    }(def));\n\n    if (composed.init.length > 1) {\n        updated.init = function () {\n            var args = arguments;\n            composed.init.forEach(function (init) {\n                init.apply(this, args);\n            }, this);\n        };\n    }\n    if (composed.preEmit.length > 1) {\n        updated.preEmit = function () {\n            return composed.preEmit.reduce(function (args, preEmit) {\n                var newValue = preEmit.apply(this, args);\n                return newValue === undefined ? args : [newValue];\n            }.bind(this), arguments);\n        };\n    }\n    if (composed.shouldEmit.length > 1) {\n        updated.shouldEmit = function () {\n            var args = arguments;\n            return !composed.shouldEmit.some(function (shouldEmit) {\n                return !shouldEmit.apply(this, args);\n            }, this);\n        };\n    }\n    Object.keys(composed).forEach(function (composable) {\n        if (composed[composable].length === 1) {\n            updated[composable] = composed[composable][0];\n        }\n    });\n\n    return updated;\n};\n",
    "/*\n * isObject, extend, isFunction, isArguments are taken from undescore/lodash in\n * order to remove the dependency\n */\nvar isObject = exports.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n};\n\nexports.extend = function(obj) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n        source = arguments[i];\n        for (prop in source) {\n            if (Object.getOwnPropertyDescriptor && Object.defineProperty) {\n                var propertyDescriptor = Object.getOwnPropertyDescriptor(source, prop);\n                Object.defineProperty(obj, prop, propertyDescriptor);\n            } else {\n                obj[prop] = source[prop];\n            }\n        }\n    }\n    return obj;\n};\n\nexports.isFunction = function(value) {\n    return typeof value === 'function';\n};\n\nexports.EventEmitter = require('eventemitter3');\n\nexports.nextTick = function(callback) {\n    setTimeout(callback, 0);\n};\n\nexports.capitalize = function(string){\n    return string.charAt(0).toUpperCase()+string.slice(1);\n};\n\nexports.callbackName = function(string){\n    return \"on\"+exports.capitalize(string);\n};\n\nexports.object = function(keys,vals){\n    var o={}, i=0;\n    for(;i<keys.length;i++){\n        o[keys[i]] = vals[i];\n    }\n    return o;\n};\n\nexports.Promise = require(\"native-promise-only\");\n\nexports.createPromise = function(resolver) {\n    return new exports.Promise(resolver);\n};\n\nexports.isArguments = function(value) {\n    return typeof value === 'object' && ('callee' in value) && typeof value.length === 'number';\n};\n\nexports.throwIf = function(val,msg){\n    if (val){\n        throw Error(msg||val);\n    }\n};\n"
  ]
}